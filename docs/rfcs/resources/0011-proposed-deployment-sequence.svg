<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1048px" preserveAspectRatio="none" style="width:739px;height:1048px;background:#FFFFFF;" version="1.1" viewBox="0 0 739 1048" width="739px" zoomAndPan="magnify"><defs><filter height="300%" id="f85000jb2z2jj" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacing" textLength="399" x="168" y="29.4023">Proposed Deployment Sequence (Abbreviated)</text><rect fill="#FFFFFF" filter="url(#f85000jb2z2jj)" height="306.7266" style="stroke:#000000;stroke-width:2.0;" width="687.5" x="34" y="188.3086"/><rect fill="#FFFFFF" filter="url(#f85000jb2z2jj)" height="369.7266" style="stroke:#000000;stroke-width:2.0;" width="416" x="309" y="591.6563"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="77" x2="77" y1="102.6875" y2="978.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="241" x2="241" y1="102.6875" y2="978.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="371" x2="371" y1="102.6875" y2="978.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="508.5" x2="508.5" y1="102.6875" y2="978.3828"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="692.5" x2="692.5" y1="102.6875" y2="978.3828"/><rect fill="#FEFECE" filter="url(#f85000jb2z2jj)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="63" x="44" y="67.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="51" y="87.7344">Jenkins</text><rect fill="#FEFECE" filter="url(#f85000jb2z2jj)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="63" x="44" y="977.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="49" x="51" y="997.918">Jenkins</text><rect fill="#FEFECE" filter="url(#f85000jb2z2jj)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="131" x="174" y="67.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="181" y="87.7344">bfd-db-migrator</text><rect fill="#FEFECE" filter="url(#f85000jb2z2jj)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="131" x="174" y="977.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="181" y="997.918">bfd-db-migrator</text><rect fill="#FEFECE" filter="url(#f85000jb2z2jj)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="100" x="319" y="67.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="326" y="87.7344">bfd-pipeline</text><rect fill="#FEFECE" filter="url(#f85000jb2z2jj)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="100" x="319" y="977.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="326" y="997.918">bfd-pipeline</text><rect fill="#FEFECE" filter="url(#f85000jb2z2jj)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="87" x="463.5" y="67.1992"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="470.5" y="87.7344">bfd-server</text><rect fill="#FEFECE" filter="url(#f85000jb2z2jj)" height="30.4883" style="stroke:#A80036;stroke-width:1.5;" width="87" x="463.5" y="977.3828"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73" x="470.5" y="997.918">bfd-server</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="674.5" y="99.7344">FHIR</text><path d="M675,50.1992 C675,40.1992 693,40.1992 693,40.1992 C693,40.1992 711,40.1992 711,50.1992 L711,76.1992 C711,86.1992 693,86.1992 693,86.1992 C693,86.1992 675,86.1992 675,76.1992 L675,50.1992 " fill="#FEFECE" filter="url(#f85000jb2z2jj)" style="stroke:#000000;stroke-width:1.5;"/><path d="M675,50.1992 C675,60.1992 693,60.1992 693,60.1992 C693,60.1992 711,60.1992 711,50.1992 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="31" x="674.5" y="990.918">FHIR</text><path d="M675,1003.8711 C675,993.8711 693,993.8711 693,993.8711 C693,993.8711 711,993.8711 711,1003.8711 L711,1029.8711 C711,1039.8711 693,1039.8711 693,1039.8711 C693,1039.8711 675,1039.8711 675,1029.8711 L675,1003.8711 " fill="#FEFECE" filter="url(#f85000jb2z2jj)" style="stroke:#000000;stroke-width:1.5;"/><path d="M675,1003.8711 C675,1013.8711 693,1013.8711 693,1013.8711 C693,1013.8711 711,1013.8711 711,1003.8711 " fill="none" style="stroke:#000000;stroke-width:1.5;"/><path d="M5,117.6875 L5,142.6875 L310,142.6875 L310,127.6875 L300,117.6875 L5,117.6875 " fill="#FBFB77" filter="url(#f85000jb2z2jj)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M300,117.6875 L300,127.6875 L310,127.6875 L300,117.6875 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284" x="11" y="135.2559">Distinct database migration deployment step</text><polygon fill="#A80036" points="229.5,169.3086,239.5,173.3086,229.5,177.3086,233.5,173.3086" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="77.5" x2="235.5" y1="173.3086" y2="173.3086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="84.5" y="168.5664">Deploy</text><path d="M34,188.3086 L161,188.3086 L161,195.3086 L151,205.3086 L34,205.3086 L34,188.3086 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="306.7266" style="stroke:#000000;stroke-width:2.0;" width="687.5" x="34" y="188.3086"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82" x="49" y="201.877">Deployment</text><path d="M246,210.6191 L246,265.6191 L351,265.6191 L351,220.6191 L341,210.6191 L246,210.6191 " fill="#FBFB77" filter="url(#f85000jb2z2jj)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M341,210.6191 L341,220.6191 L351,220.6191 L341,210.6191 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="252" y="228.1875">Recreate ec2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="252" y="243.498">instance with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="252" y="258.8086">new AMI</text><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="283.5" y1="327.4824" y2="327.4824"/><line style="stroke:#A80036;stroke-width:1.0;" x1="283.5" x2="283.5" y1="327.4824" y2="340.4824"/><line style="stroke:#A80036;stroke-width:1.0;" x1="242.5" x2="283.5" y1="340.4824" y2="340.4824"/><polygon fill="#A80036" points="252.5,336.4824,242.5,340.4824,252.5,344.4824,248.5,340.4824" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="64" x="248.5" y="292.1191">Bootstrap,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="51" x="248.5" y="307.4297">Migrate,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="50" x="248.5" y="322.7402">Validate</text><polygon fill="#A80036" points="681,365.793,691,369.793,681,373.793,685,369.793" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="687" y1="369.793" y2="369.793"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="248.5" y="365.0508">Execute Migrations</text><polygon fill="#A80036" points="252.5,395.1035,242.5,399.1035,252.5,403.1035,248.5,399.1035" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="246.5" x2="692" y1="399.1035" y2="399.1035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="258.5" y="394.3613">Changes committed</text><polygon fill="#A80036" points="681,424.4141,691,428.4141,681,432.4141,685,428.4141" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="241.5" x2="687" y1="428.4141" y2="428.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="248.5" y="423.6719">Hibernate Validations</text><polygon fill="#A80036" points="252.5,453.7246,242.5,457.7246,252.5,461.7246,248.5,457.7246" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="246.5" x2="692" y1="457.7246" y2="457.7246"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="31" x="258.5" y="452.9824">Valid</text><polygon fill="#A80036" points="88.5,483.0352,78.5,487.0352,88.5,491.0352,84.5,487.0352" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="82.5" x2="240.5" y1="487.0352" y2="487.0352"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="94.5" y="482.293">Deployment Complete</text><path d="M40,507.0352 L40,532.0352 L545,532.0352 L545,517.0352 L535,507.0352 L40,507.0352 " fill="#FBFB77" filter="url(#f85000jb2z2jj)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M535,507.0352 L535,517.0352 L545,517.0352 L535,507.0352 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="316" x="128.25" y="524.6035">Subsequent deployment stage may remain parallel</text><polygon fill="#A80036" points="359,558.6563,369,562.6563,359,566.6563,363,562.6563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="77.5" x2="365" y1="562.6563" y2="562.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="84.5" y="557.9141">Deploy</text><polygon fill="#A80036" points="497,572.6563,507,576.6563,497,580.6563,501,576.6563" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="77.5" x2="503" y1="576.6563" y2="576.6563"/><path d="M309,591.6563 L436,591.6563 L436,598.6563 L426,608.6563 L309,608.6563 L309,591.6563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="369.7266" style="stroke:#000000;stroke-width:2.0;" width="416" x="309" y="591.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82" x="324" y="605.2246">Deployment</text><path d="M514,613.9668 L514,653.9668 L711,653.9668 L711,623.9668 L701,613.9668 L514,613.9668 " fill="#FBFB77" filter="url(#f85000jb2z2jj)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M701,613.9668 L701,623.9668 L711,623.9668 L701,613.9668 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153" x="520" y="631.5352">Update launch template,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="520" y="646.8457">re-create autoscaling group</text><line style="stroke:#A80036;stroke-width:1.0;" x1="509" x2="551" y1="684.8984" y2="684.8984"/><line style="stroke:#A80036;stroke-width:1.0;" x1="551" x2="551" y1="684.8984" y2="697.8984"/><line style="stroke:#A80036;stroke-width:1.0;" x1="510" x2="551" y1="697.8984" y2="697.8984"/><polygon fill="#A80036" points="520,693.8984,510,697.8984,520,701.8984,516,697.8984" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="516" y="680.1563">Bootstrap</text><line style="stroke:#A80036;stroke-width:1.0;" x1="509" x2="551" y1="727.209" y2="727.209"/><line style="stroke:#A80036;stroke-width:1.0;" x1="551" x2="551" y1="727.209" y2="740.209"/><line style="stroke:#A80036;stroke-width:1.0;" x1="510" x2="551" y1="740.209" y2="740.209"/><polygon fill="#A80036" points="520,736.209,510,740.209,520,744.209,516,740.209" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="516" y="722.4668">Serve HTTP Requests</text><polygon fill="#A80036" points="520,765.5195,510,769.5195,520,773.5195,516,769.5195" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="681,765.5195,691,769.5195,681,773.5195,685,769.5195" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="514" x2="687" y1="769.5195" y2="769.5195"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="526" y="764.7773">Continued Read Requests</text><path d="M376,782.5195 L376,837.5195 L481,837.5195 L481,792.5195 L471,782.5195 L376,782.5195 " fill="#FBFB77" filter="url(#f85000jb2z2jj)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M471,782.5195 L471,792.5195 L481,792.5195 L471,782.5195 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="382" y="800.0879">Recreate ec2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="382" y="815.3984">instance with</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="382" y="830.709">new AMI</text><line style="stroke:#A80036;stroke-width:1.0;" x1="371" x2="413" y1="868.7617" y2="868.7617"/><line style="stroke:#A80036;stroke-width:1.0;" x1="413" x2="413" y1="868.7617" y2="881.7617"/><line style="stroke:#A80036;stroke-width:1.0;" x1="372" x2="413" y1="881.7617" y2="881.7617"/><polygon fill="#A80036" points="382,877.7617,372,881.7617,382,885.7617,378,881.7617" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="60" x="378" y="864.0195">Bootstrap</text><line style="stroke:#A80036;stroke-width:1.0;" x1="371" x2="413" y1="911.0723" y2="911.0723"/><line style="stroke:#A80036;stroke-width:1.0;" x1="413" x2="413" y1="911.0723" y2="924.0723"/><line style="stroke:#A80036;stroke-width:1.0;" x1="372" x2="413" y1="924.0723" y2="924.0723"/><polygon fill="#A80036" points="382,920.0723,372,924.0723,382,928.0723,378,924.0723" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124" x="378" y="906.3301">Run "bfd-pipelines"</text><polygon fill="#A80036" points="382,949.3828,372,953.3828,382,957.3828,378,953.3828" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="681,949.3828,691,953.3828,681,957.3828,685,953.3828" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="376" x2="687" y1="953.3828" y2="953.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="388" y="948.6406">Continued Database Interactions</text><!--MD5=[f5af280deccc45874757d949a1a89796]
@startuml
title Proposed Deployment Sequence (Abbreviated)
participant Jenkins
participant "bfd-db-migrator"
participant "bfd-pipeline"
participant "bfd-server"
database FHIR
note over Jenkins,"bfd-db-migrator": Distinct database migration deployment step
Jenkins -> "bfd-db-migrator": Deploy
group Deployment
       note right of "bfd-db-migrator": Recreate ec2\ninstance with\nnew AMI
       "bfd-db-migrator" -> "bfd-db-migrator": Bootstrap,\nMigrate,\nValidate
       "bfd-db-migrator" -> FHIR: Execute Migrations
       FHIR - -> "bfd-db-migrator": Changes committed
       "bfd-db-migrator" -> FHIR: Hibernate Validations
       FHIR - -> "bfd-db-migrator": Valid
       "bfd-db-migrator" - -> Jenkins: Deployment Complete
end
note over Jenkins,"bfd-server": Subsequent deployment stage may remain parallel
Jenkins -> "bfd-pipeline": Deploy
Jenkins -> "bfd-server":
group Deployment
       note right of "bfd-server": Update launch template,\nre-create autoscaling group
       "bfd-server" -> "bfd-server": Bootstrap
       "bfd-server" -> "bfd-server": Serve HTTP Requests
       "bfd-server" <-> FHIR: Continued Read Requests
       note right of "bfd-pipeline": Recreate ec2\ninstance with\nnew AMI
       "bfd-pipeline" -> "bfd-pipeline": Bootstrap
       "bfd-pipeline" -> "bfd-pipeline": Run "bfd-pipelines"
       "bfd-pipeline" <-> FHIR: Continued Database Interactions
end
@enduml

PlantUML version 1.2022.1(Tue Feb 01 12:19:58 CST 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>