<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1993px" preserveAspectRatio="none" style="width:2172px;height:1993px;background:#FFFFFF;" version="1.1" viewBox="0 0 2172 1993" width="2172px" zoomAndPan="magnify"><defs/><g><rect height="26.4883" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="468" x="853.5" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="458" x="858.5" y="28.5352">server-regression Lambda Deployment and Execution Sequence</text><rect height="337.416" style="stroke:#000000;stroke-width:1.5;fill:none;" width="862" x="10" y="135.9766"/><rect height="251.7949" style="stroke:#000000;stroke-width:1.5;fill:none;" width="582.5" x="1573.5" y="487.3926"/><rect height="1142.1113" style="stroke:#000000;stroke-width:1.5;fill:none;" width="2156" x="10" y="753.1875"/><rect height="965.5586" style="stroke:#000000;stroke-width:1.5;fill:none;" width="1711.5" x="444.5" y="908.7402"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="53" x2="53" y1="118.9766" y2="1912.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="192.5" x2="192.5" y1="118.9766" y2="1912.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="338.5" x2="338.5" y1="118.9766" y2="1912.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="531.5" x2="531.5" y1="118.9766" y2="1912.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="702" x2="702" y1="118.9766" y2="1912.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="804" x2="804" y1="118.9766" y2="1912.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1030.5" x2="1030.5" y1="118.9766" y2="1912.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1272.5" x2="1272.5" y1="118.9766" y2="1912.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1387.5" x2="1387.5" y1="118.9766" y2="1912.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1492.5" x2="1492.5" y1="118.9766" y2="1912.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1623.5" x2="1623.5" y1="118.9766" y2="1912.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1790" x2="1790" y1="118.9766" y2="1912.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="1939" x2="1939" y1="118.9766" y2="1912.2988"/><line style="stroke:#181818;stroke-width:0.5;fill:none;stroke-dasharray:5.0,5.0;" x1="2073" x2="2073" y1="118.9766" y2="1912.2988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="20" y="116.0234">operator</text><ellipse cx="53" cy="50.9883" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M53,58.9883 L53,85.9883 M40,66.9883 L66,66.9883 M53,85.9883 L40,100.9883 M53,85.9883 L66,100.9883 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="60" x="20" y="1924.834">operator</text><ellipse cx="53" cy="1936.2871" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M53,1944.2871 L53,1971.2871 M40,1952.2871 L66,1952.2871 M53,1971.2871 L40,1986.2871 M53,1971.2871 L66,1986.2871 " fill="none" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="167.5" y="116.0234">github</text><path d="M175,66.4883 C175,56.4883 193,56.4883 193,56.4883 C193,56.4883 211,56.4883 211,66.4883 L211,92.4883 C211,102.4883 193,102.4883 193,102.4883 C193,102.4883 175,102.4883 175,92.4883 L175,66.4883 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M175,66.4883 C175,76.4883 193,76.4883 193,76.4883 C193,76.4883 211,76.4883 211,66.4883 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="167.5" y="1924.834">github</text><path d="M175,1937.7871 C175,1927.7871 193,1927.7871 193,1927.7871 C193,1927.7871 211,1927.7871 211,1937.7871 L211,1963.7871 C211,1973.7871 193,1973.7871 193,1973.7871 C193,1973.7871 175,1973.7871 175,1963.7871 L175,1937.7871 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M175,1937.7871 C175,1947.7871 193,1947.7871 193,1947.7871 C193,1947.7871 211,1947.7871 211,1937.7871 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="211" x="233.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197" x="240.5" y="108.0234">bfd-server-regression-build</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="211" x="233.5" y="1911.2988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="197" x="240.5" y="1931.834">bfd-server-regression-build</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="454.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="461.5" y="108.0234">deployment pipeline</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="454.5" y="1911.2988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="461.5" y="1931.834">deployment pipeline</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="669" y="116.0234">AWS ECR</text><path d="M684.5,66.4883 C684.5,56.4883 702.5,56.4883 702.5,56.4883 C702.5,56.4883 720.5,56.4883 720.5,66.4883 L720.5,92.4883 C720.5,102.4883 702.5,102.4883 702.5,102.4883 C702.5,102.4883 684.5,102.4883 684.5,92.4883 L684.5,66.4883 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M684.5,66.4883 C684.5,76.4883 702.5,76.4883 702.5,76.4883 C702.5,76.4883 720.5,76.4883 720.5,66.4883 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61" x="669" y="1924.834">AWS ECR</text><path d="M684.5,1937.7871 C684.5,1927.7871 702.5,1927.7871 702.5,1927.7871 C702.5,1927.7871 720.5,1927.7871 720.5,1937.7871 L720.5,1963.7871 C720.5,1973.7871 702.5,1973.7871 702.5,1973.7871 C702.5,1973.7871 684.5,1973.7871 684.5,1963.7871 L684.5,1937.7871 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M684.5,1937.7871 C684.5,1947.7871 702.5,1947.7871 702.5,1947.7871 C702.5,1947.7871 720.5,1947.7871 720.5,1937.7871 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="746" y="116.0234">parameter store</text><path d="M786,66.4883 C786,56.4883 804,56.4883 804,56.4883 C804,56.4883 822,56.4883 822,66.4883 L822,92.4883 C822,102.4883 804,102.4883 804,102.4883 C804,102.4883 786,102.4883 786,92.4883 L786,66.4883 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M786,66.4883 C786,76.4883 804,76.4883 804,76.4883 C804,76.4883 822,76.4883 822,66.4883 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="746" y="1924.834">parameter store</text><path d="M786,1937.7871 C786,1927.7871 804,1927.7871 804,1927.7871 C804,1927.7871 822,1927.7871 822,1937.7871 L822,1963.7871 C822,1973.7871 804,1973.7871 804,1973.7871 C804,1973.7871 786,1973.7871 786,1963.7871 L786,1937.7871 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M786,1937.7871 C786,1947.7871 804,1947.7871 804,1947.7871 C804,1947.7871 822,1947.7871 822,1937.7871 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="192" x="934.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="941.5" y="108.0234">server-regression lambda</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="192" x="934.5" y="1911.2988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178" x="941.5" y="1931.834">server-regression lambda</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108" x="1218.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="1225.5" y="108.0234">trigger queue</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="108" x="1218.5" y="1911.2988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94" x="1225.5" y="1931.834">trigger queue</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="1336.5" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="1343.5" y="108.0234">signal queue</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="1336.5" y="1911.2988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="1343.5" y="1931.834">signal queue</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="1448.5" y="116.0234">AWS Athena</text><path d="M1475,66.4883 C1475,56.4883 1493,56.4883 1493,56.4883 C1493,56.4883 1511,56.4883 1511,66.4883 L1511,92.4883 C1511,102.4883 1493,102.4883 1493,102.4883 C1493,102.4883 1475,102.4883 1475,92.4883 L1475,66.4883 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1475,66.4883 C1475,76.4883 1493,76.4883 1493,76.4883 C1493,76.4883 1511,76.4883 1511,66.4883 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="83" x="1448.5" y="1924.834">AWS Athena</text><path d="M1475,1937.7871 C1475,1927.7871 1493,1927.7871 1493,1927.7871 C1493,1927.7871 1511,1927.7871 1511,1937.7871 L1511,1963.7871 C1511,1973.7871 1493,1973.7871 1493,1973.7871 C1493,1973.7871 1475,1973.7871 1475,1963.7871 L1475,1937.7871 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1475,1937.7871 C1475,1947.7871 1493,1947.7871 1493,1947.7871 C1493,1947.7871 1511,1947.7871 1511,1937.7871 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="1583.5" y="116.0234">insights S3</text><path d="M1606,66.4883 C1606,56.4883 1624,56.4883 1624,56.4883 C1624,56.4883 1642,56.4883 1642,66.4883 L1642,92.4883 C1642,102.4883 1624,102.4883 1624,102.4883 C1624,102.4883 1606,102.4883 1606,92.4883 L1606,66.4883 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1606,66.4883 C1606,76.4883 1624,76.4883 1624,76.4883 C1624,76.4883 1642,76.4883 1642,66.4883 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="1583.5" y="1924.834">insights S3</text><path d="M1606,1937.7871 C1606,1927.7871 1624,1927.7871 1624,1927.7871 C1624,1927.7871 1642,1927.7871 1642,1937.7871 L1642,1963.7871 C1642,1973.7871 1624,1973.7871 1624,1973.7871 C1624,1973.7871 1606,1973.7871 1606,1963.7871 L1606,1937.7871 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1606,1937.7871 C1606,1947.7871 1624,1947.7871 1624,1947.7871 C1624,1947.7871 1642,1947.7871 1642,1937.7871 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="1713" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="1720" y="108.0234">glue-trigger lambda</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="1713" y="1911.2988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="1720" y="1931.834">glue-trigger lambda</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="1888" y="87.4883"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="1895" y="108.0234">Glue Crawler</text><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="102" x="1888" y="1911.2988"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="1895" y="1931.834">Glue Crawler</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="2000" y="116.0234">Glue Metadata Table</text><path d="M2055,66.4883 C2055,56.4883 2073,56.4883 2073,56.4883 C2073,56.4883 2091,56.4883 2091,66.4883 L2091,92.4883 C2091,102.4883 2073,102.4883 2073,102.4883 C2073,102.4883 2055,102.4883 2055,92.4883 L2055,66.4883 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M2055,66.4883 C2055,76.4883 2073,76.4883 2073,76.4883 C2073,76.4883 2091,76.4883 2091,66.4883 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="2000" y="1924.834">Glue Metadata Table</text><path d="M2055,1937.7871 C2055,1927.7871 2073,1927.7871 2073,1927.7871 C2073,1927.7871 2091,1927.7871 2091,1937.7871 L2091,1963.7871 C2091,1973.7871 2073,1973.7871 2073,1973.7871 C2073,1973.7871 2055,1973.7871 2055,1963.7871 L2055,1937.7871 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M2055,1937.7871 C2055,1947.7871 2073,1947.7871 2073,1947.7871 C2073,1947.7871 2091,1947.7871 2091,1937.7871 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><path d="M10,135.9766 L183,135.9766 L183,143.2871 L173,153.2871 L10,153.2871 L10,135.9766 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="337.416" style="stroke:#000000;stroke-width:1.5;" width="862" x="10" y="135.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="128" x="25" y="149.5449">Image Deployment</text><polygon fill="#181818" points="181,170.5977,191,174.5977,181,178.5977,185,174.5977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="53" x2="187" y1="174.5977" y2="174.5977"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="60" y="169.8555">Submit change set</text><polygon fill="#181818" points="64,184.5977,54,188.5977,64,192.5977,60,188.5977" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="58" x2="192" y1="188.5977" y2="188.5977"/><polygon fill="#181818" points="327,213.9082,337,217.9082,327,221.9082,331,217.9082" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="53" x2="333" y1="217.9082" y2="217.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="60" y="213.166">Trigger Image Build</text><polygon fill="#181818" points="204,243.2188,194,247.2188,204,251.2188,200,247.2188" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="198" x2="338" y1="247.2188" y2="247.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="210" y="242.4766">Request change set</text><polygon fill="#181818" points="327,272.5293,337,276.5293,327,280.5293,331,276.5293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="193" x2="333" y1="276.5293" y2="276.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="200" y="271.7871">Return change set</text><line style="stroke:#181818;stroke-width:1.0;" x1="339" x2="381" y1="321.1504" y2="321.1504"/><line style="stroke:#181818;stroke-width:1.0;" x1="381" x2="381" y1="321.1504" y2="334.1504"/><line style="stroke:#181818;stroke-width:1.0;" x1="340" x2="381" y1="334.1504" y2="334.1504"/><polygon fill="#181818" points="350,330.1504,340,334.1504,350,338.1504,346,334.1504" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="346" y="301.0977">build-push.sh:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="346" y="316.4082">build lambda Docker image</text><polygon fill="#181818" points="690.5,374.7715,700.5,378.7715,690.5,382.7715,694.5,378.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="339" x2="696.5" y1="378.7715" y2="378.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="346" y="358.7188">build-push.sh:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="329" x="346" y="374.0293">push Docker image to bfd-mgmt-server-regression</text><polygon fill="#181818" points="350,388.7715,340,392.7715,350,396.7715,346,392.7715" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="344" x2="701.5" y1="392.7715" y2="392.7715"/><polygon fill="#181818" points="792,433.3926,802,437.3926,792,441.3926,796,437.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="339" x2="798" y1="437.3926" y2="437.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="346" y="417.3398">build-push.sh:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="193" x="346" y="432.6504">write image tag SSM parameter</text><polygon fill="#181818" points="350,447.3926,340,451.3926,350,455.3926,346,451.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="344" x2="803" y1="451.3926" y2="451.3926"/><polygon fill="#181818" points="64,461.3926,54,465.3926,64,469.3926,60,465.3926" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="58" x2="338" y1="465.3926" y2="465.3926"/><path d="M1573.5,487.3926 L1705.5,487.3926 L1705.5,494.7031 L1695.5,504.7031 L1573.5,504.7031 L1573.5,487.3926 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="251.7949" style="stroke:#000000;stroke-width:1.5;" width="582.5" x="1573.5" y="487.3926"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="87" x="1588.5" y="500.9609">Glue Crawler</text><polygon fill="#181818" points="1778,537.3242,1788,541.3242,1778,545.3242,1782,541.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1624" x2="1784" y1="541.3242" y2="541.3242"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="142" x="1631" y="521.2715">s3-event-notification:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="1631" y="536.582">trigger lambda</text><polygon fill="#181818" points="1635,551.3242,1625,555.3242,1635,559.3242,1631,555.3242" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1629" x2="1789" y1="555.3242" y2="555.3242"/><polygon fill="#181818" points="1927,595.9453,1937,599.9453,1927,603.9453,1931,599.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1790" x2="1933" y1="599.9453" y2="599.9453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81" x="1797" y="579.8926">glue-trigger:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="1797" y="595.2031">trigger Glue Crawler</text><polygon fill="#181818" points="1801,609.9453,1791,613.9453,1801,617.9453,1797,613.9453" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1795" x2="1938" y1="613.9453" y2="613.9453"/><polygon fill="#181818" points="1635,654.5664,1625,658.5664,1635,662.5664,1631,658.5664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1629" x2="1938" y1="658.5664" y2="658.5664"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="1641" y="638.5137">glue-crawler:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="1641" y="653.8242">crawl new parititions</text><polygon fill="#181818" points="1927,668.5664,1937,672.5664,1927,676.5664,1931,672.5664" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1624" x2="1933" y1="672.5664" y2="672.5664"/><polygon fill="#181818" points="2061,713.1875,2071,717.1875,2061,721.1875,2065,717.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1939" x2="2067" y1="717.1875" y2="717.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="1946" y="697.1348">glue-crawler:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="1946" y="712.4453">add new tables</text><polygon fill="#181818" points="1635,727.1875,1625,731.1875,1635,735.1875,1631,731.1875" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1629" x2="2072" y1="731.1875" y2="731.1875"/><path d="M10,753.1875 L221,753.1875 L221,760.498 L211,770.498 L10,770.498 L10,753.1875 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1142.1113" style="stroke:#000000;stroke-width:1.5;" width="2156" x="10" y="753.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="166" x="25" y="766.7559">BFD Deployment Excerpt</text><polygon fill="#181818" points="181,787.8086,191,791.8086,181,795.8086,185,791.8086" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="53" x2="187" y1="791.8086" y2="791.8086"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="60" y="787.0664">Submit change set</text><polygon fill="#181818" points="64,801.8086,54,805.8086,64,809.8086,60,805.8086" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="58" x2="192" y1="805.8086" y2="805.8086"/><polygon fill="#181818" points="519.5,831.1191,529.5,835.1191,519.5,839.1191,523.5,835.1191" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="53" x2="525.5" y1="835.1191" y2="835.1191"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="60" y="830.377">Trigger Deployment</text><polygon fill="#181818" points="204,860.4297,194,864.4297,204,868.4297,200,864.4297" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="198" x2="530.5" y1="864.4297" y2="864.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122" x="210" y="859.6875">Request change set</text><polygon fill="#181818" points="519.5,889.7402,529.5,893.7402,519.5,897.7402,523.5,893.7402" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="193" x2="525.5" y1="893.7402" y2="893.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="200" y="888.998">Return change set</text><path d="M444.5,908.7402 L518.5,908.7402 L518.5,916.0508 L508.5,926.0508 L444.5,926.0508 L444.5,908.7402 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="965.5586" style="stroke:#000000;stroke-width:1.5;" width="1711.5" x="444.5" y="908.7402"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="459.5" y="922.3086">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="272" x="533.5" y="921.375">[ENV for ENV in ("TEST", "PROD-SBX", "PROD")]</text><line style="stroke:#181818;stroke-width:1.0;" x1="531.5" x2="573.5" y1="962.6719" y2="962.6719"/><line style="stroke:#181818;stroke-width:1.0;" x1="573.5" x2="573.5" y1="962.6719" y2="975.6719"/><line style="stroke:#181818;stroke-width:1.0;" x1="532.5" x2="573.5" y1="975.6719" y2="975.6719"/><polygon fill="#181818" points="542.5,971.6719,532.5,975.6719,542.5,979.6719,538.5,975.6719" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="538.5" y="942.6191">terraform:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="538.5" y="957.9297">plan and apply</text><polygon fill="#181818" points="792,1016.293,802,1020.293,792,1024.293,796,1020.293" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="531.5" x2="798" y1="1020.293" y2="1020.293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="538.5" y="1000.2402">terraform:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="538.5" y="1015.5508">Request latest Docker image tag</text><polygon fill="#181818" points="542.5,1045.6035,532.5,1049.6035,542.5,1053.6035,538.5,1049.6035" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="536.5" x2="803" y1="1049.6035" y2="1049.6035"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202" x="548.5" y="1044.8613">Return latest Docker image tage</text><polygon fill="#181818" points="1018.5,1090.2246,1028.5,1094.2246,1018.5,1098.2246,1022.5,1094.2246" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="531.5" x2="1024.5" y1="1094.2246" y2="1094.2246"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63" x="538.5" y="1074.1719">terraform:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="320" x="538.5" y="1089.4824">deploy server-regression Lambda to ENV using tag</text><polygon fill="#181818" points="713.5,1119.5352,703.5,1123.5352,713.5,1127.5352,709.5,1123.5352" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="707.5" x2="1029.5" y1="1123.5352" y2="1123.5352"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="304" x="719.5" y="1118.793">Retrieve tagged server-regression Docker Image</text><polygon fill="#181818" points="1018.5,1133.5352,1028.5,1137.5352,1018.5,1141.5352,1022.5,1137.5352" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="702.5" x2="1024.5" y1="1137.5352" y2="1137.5352"/><line style="stroke:#181818;stroke-width:1.0;" x1="1030.5" x2="1072.5" y1="1182.1563" y2="1182.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="1072.5" x2="1072.5" y1="1182.1563" y2="1195.1563"/><line style="stroke:#181818;stroke-width:1.0;" x1="1031.5" x2="1072.5" y1="1195.1563" y2="1195.1563"/><polygon fill="#181818" points="1041.5,1191.1563,1031.5,1195.1563,1041.5,1199.1563,1037.5,1195.1563" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="1037.5" y="1162.1035">Create server-regression from</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="228" x="1037.5" y="1177.4141">bfd-mgmt-server-regression image</text><polygon fill="#181818" points="542.5,1205.1563,532.5,1209.1563,542.5,1213.1563,538.5,1209.1563" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="536.5" x2="1029.5" y1="1209.1563" y2="1209.1563"/><polygon fill="#181818" points="1260.5,1249.7773,1270.5,1253.7773,1260.5,1257.7773,1264.5,1253.7773" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="531.5" x2="1266.5" y1="1253.7773" y2="1253.7773"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70" x="538.5" y="1233.7246">jenkinsfile:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="329" x="538.5" y="1249.0352">write server-regression ENV invocation event to SQS</text><polygon fill="#181818" points="542.5,1263.7773,532.5,1267.7773,542.5,1271.7773,538.5,1267.7773" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="536.5" x2="1271.5" y1="1267.7773" y2="1267.7773"/><polygon fill="#181818" points="1260.5,1308.3984,1270.5,1312.3984,1260.5,1316.3984,1264.5,1312.3984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1030.5" x2="1266.5" y1="1312.3984" y2="1312.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1037.5" y="1292.3457">server-regression:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="1037.5" y="1307.6563">polls messages</text><polygon fill="#181818" points="1041.5,1337.709,1031.5,1341.709,1041.5,1345.709,1037.5,1341.709" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1035.5" x2="1271.5" y1="1341.709" y2="1341.709"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="1047.5" y="1336.9668">Returns messages</text><line style="stroke:#181818;stroke-width:1.0;" x1="1030.5" x2="1072.5" y1="1386.3301" y2="1386.3301"/><line style="stroke:#181818;stroke-width:1.0;" x1="1072.5" x2="1072.5" y1="1386.3301" y2="1399.3301"/><line style="stroke:#181818;stroke-width:1.0;" x1="1031.5" x2="1072.5" y1="1399.3301" y2="1399.3301"/><polygon fill="#181818" points="1041.5,1395.3301,1031.5,1399.3301,1041.5,1403.3301,1037.5,1399.3301" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1037.5" y="1366.2773">server-regression:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="1037.5" y="1381.5879">consumes event and runs on ENV</text><polygon fill="#181818" points="1481,1439.9512,1491,1443.9512,1481,1447.9512,1485,1443.9512" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1030.5" x2="1487" y1="1443.9512" y2="1443.9512"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1037.5" y="1423.8984">server-regression:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174" x="1037.5" y="1439.209">queries previous run's stats</text><polygon fill="#181818" points="2061,1469.2617,2071,1473.2617,2061,1477.2617,2065,1473.2617" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1493" x2="2067" y1="1473.2617" y2="1473.2617"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="382" x="1500" y="1468.5195">Checks for partitions/tables representing insights S3 bucket</text><polygon fill="#181818" points="1504,1483.2617,1494,1487.2617,1504,1491.2617,1500,1487.2617" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1498" x2="2072" y1="1487.2617" y2="1487.2617"/><polygon fill="#181818" points="1612,1527.8828,1622,1531.8828,1612,1535.8828,1616,1531.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1493" x2="1618" y1="1531.8828" y2="1531.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107" x="1500" y="1511.8301">Reads stats JSON</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="1500" y="1527.1406">for query</text><polygon fill="#181818" points="1504,1541.8828,1494,1545.8828,1504,1549.8828,1500,1545.8828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1498" x2="1623" y1="1545.8828" y2="1545.8828"/><polygon fill="#181818" points="1041.5,1571.1934,1031.5,1575.1934,1041.5,1579.1934,1037.5,1575.1934" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1035.5" x2="1492" y1="1575.1934" y2="1575.1934"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="176" x="1047.5" y="1570.4512">Returns previous run's stats</text><line style="stroke:#181818;stroke-width:1.0;" x1="1030.5" x2="1072.5" y1="1619.8145" y2="1619.8145"/><line style="stroke:#181818;stroke-width:1.0;" x1="1072.5" x2="1072.5" y1="1619.8145" y2="1632.8145"/><line style="stroke:#181818;stroke-width:1.0;" x1="1031.5" x2="1072.5" y1="1632.8145" y2="1632.8145"/><polygon fill="#181818" points="1041.5,1628.8145,1031.5,1632.8145,1041.5,1636.8145,1037.5,1632.8145" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1037.5" y="1599.7617">server-regression:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="123" x="1037.5" y="1615.0723">compares statistics</text><polygon fill="#181818" points="1612,1673.4355,1622,1677.4355,1612,1681.4355,1616,1677.4355" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1030.5" x2="1618" y1="1677.4355" y2="1677.4355"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1037.5" y="1657.3828">server-regression:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148" x="1037.5" y="1672.6934">stores current run stats</text><polygon fill="#181818" points="1041.5,1687.4355,1031.5,1691.4355,1041.5,1695.4355,1037.5,1691.4355" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1035.5" x2="1623" y1="1691.4355" y2="1691.4355"/><polygon fill="#181818" points="1375.5,1732.0566,1385.5,1736.0566,1375.5,1740.0566,1379.5,1736.0566" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1030.5" x2="1381.5" y1="1736.0566" y2="1736.0566"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="1037.5" y="1716.0039">server-regression:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="299" x="1037.5" y="1731.3145">sends pipeline signal to queue indicating result</text><polygon fill="#181818" points="1041.5,1746.0566,1031.5,1750.0566,1041.5,1754.0566,1037.5,1750.0566" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1035.5" x2="1386.5" y1="1750.0566" y2="1750.0566"/><polygon fill="#181818" points="1375.5,1775.3672,1385.5,1779.3672,1375.5,1783.3672,1379.5,1779.3672" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="531.5" x2="1381.5" y1="1779.3672" y2="1779.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="251" x="538.5" y="1774.625">Polls for signals from server-regression</text><polygon fill="#181818" points="542.5,1804.6777,532.5,1808.6777,542.5,1812.6777,538.5,1808.6777" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="536.5" x2="1386.5" y1="1808.6777" y2="1808.6777"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="548.5" y="1803.9355">Returns signals</text><line style="stroke:#181818;stroke-width:1.0;" x1="531.5" x2="573.5" y1="1853.2988" y2="1853.2988"/><line style="stroke:#181818;stroke-width:1.0;" x1="573.5" x2="573.5" y1="1853.2988" y2="1866.2988"/><line style="stroke:#181818;stroke-width:1.0;" x1="532.5" x2="573.5" y1="1866.2988" y2="1866.2988"/><polygon fill="#181818" points="542.5,1862.2988,532.5,1866.2988,542.5,1870.2988,538.5,1866.2988" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157" x="538.5" y="1833.2461">Inspects signal for result</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132" x="538.5" y="1848.5566">and sets build status</text><polygon fill="#181818" points="64,1883.2988,54,1887.2988,64,1891.2988,60,1887.2988" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="58" x2="530.5" y1="1887.2988" y2="1887.2988"/><!--MD5=[95a059cd50eb804bf07ac453a2752f43]
@startuml server-regression
title server-regression Lambda Deployment and Execution Sequence
actor operator
database "github"
participant "bfd-server-regression-build"
participant "deployment pipeline"
database "AWS ECR"
database "parameter store"
participant "server-regression lambda"
participant "trigger queue"
participant "signal queue"
database "AWS Athena"
database "insights S3"
participant "glue-trigger lambda"
participant "Glue Crawler"
database "Glue Metadata Table"
group Image Deployment
    operator -> github: Submit change set
    github - -> operator
    operator -> "bfd-server-regression-build": Trigger Image Build
    "bfd-server-regression-build" -> github: Request change set
    github - -> "bfd-server-regression-build": Return change set
    "bfd-server-regression-build" -> "bfd-server-regression-build": build-push.sh:\nbuild lambda Docker image
    "bfd-server-regression-build" -> "AWS ECR": build-push.sh:\npush Docker image to bfd-mgmt-server-regression
    "AWS ECR" - -> "bfd-server-regression-build"
    "bfd-server-regression-build" -> "parameter store": build-push.sh:\nwrite image tag SSM parameter
    "parameter store" - -> "bfd-server-regression-build"
    "bfd-server-regression-build" - -> operator
end
group Glue Crawler
    "insights S3" -> "glue-trigger lambda":s3-event-notification:\ntrigger lambda
    "glue-trigger lambda" - -> "insights S3"
    "glue-trigger lambda" -> "Glue Crawler":glue-trigger:\ntrigger Glue Crawler
    "Glue Crawler" - -> "glue-trigger lambda"
    "Glue Crawler" -> "insights S3":glue-crawler:\ncrawl new parititions
    "insights S3" - -> "Glue Crawler"
    "Glue Crawler" -> "Glue Metadata Table":glue-crawler:\nadd new tables
    "Glue Metadata Table" - -> "insights S3"
end
group BFD Deployment Excerpt
    operator -> github: Submit change set
    github - -> operator
    operator -> "deployment pipeline": Trigger Deployment
    "deployment pipeline" -> github: Request change set
    github - -> "deployment pipeline": Return change set
        loop ENV for ENV in ("TEST", "PROD-SBX", "PROD")
            "deployment pipeline" -> "deployment pipeline": terraform:\nplan and apply
            "deployment pipeline" -> "parameter store": terraform:\nRequest latest Docker image tag
            "parameter store" - -> "deployment pipeline": Return latest Docker image tage
            "deployment pipeline" -> "server-regression lambda": terraform:\ndeploy server-regression Lambda to ENV using tag
            "server-regression lambda" -> "AWS ECR": Retrieve tagged server-regression Docker Image
            "AWS ECR" - -> "server-regression lambda"
            "server-regression lambda" -> "server-regression lambda": Create server-regression from\nbfd-mgmt-server-regression image
            "server-regression lambda" - -> "deployment pipeline"
            "deployment pipeline" -> "trigger queue": jenkinsfile:\nwrite server-regression ENV invocation event to SQS
            "trigger queue" - -> "deployment pipeline"
            "server-regression lambda" -> "trigger queue":server-regression:\npolls messages
            "trigger queue" - -> "server-regression lambda":Returns messages
            "server-regression lambda" -> "server-regression lambda":server-regression:\nconsumes event and runs on ENV
            "server-regression lambda" -> "AWS Athena":server-regression:\nqueries previous run's stats
            "AWS Athena" -> "Glue Metadata Table":Checks for partitions/tables representing insights S3 bucket
            "Glue Metadata Table" - -> "AWS Athena"
            "AWS Athena" -> "insights S3":Reads stats JSON\nfor query
            "insights S3" - -> "AWS Athena"
            "AWS Athena" - -> "server-regression lambda":Returns previous run's stats
            "server-regression lambda" -> "server-regression lambda":server-regression:\ncompares statistics
            "server-regression lambda" -> "insights S3":server-regression:\nstores current run stats
            "insights S3" - -> "server-regression lambda"
            "server-regression lambda" -> "signal queue":server-regression:\nsends pipeline signal to queue indicating result
            "signal queue" - -> "server-regression lambda"
            "deployment pipeline" -> "signal queue":Polls for signals from server-regression
            "signal queue" - -> "deployment pipeline":Returns signals
            "deployment pipeline" -> "deployment pipeline": Inspects signal for result\nand sets build status
        end
    "deployment pipeline" - -> operator
end
@enduml

PlantUML version 1.2022.6(Tue Jun 21 13:34:49 EDT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>