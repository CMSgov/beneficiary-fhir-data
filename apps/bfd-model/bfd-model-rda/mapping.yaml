mappings:
  - id: Mbi
    entityClassName: gov.cms.bfd.model.rda.Mbi
    table:
      name: MbiCache
      schema: pre_adj
      primaryKeyColumns:
        - mbiId
      equalsColumns:
        - mbi
      columns:
        - name: mbiId
          sqlType: bigint
          nullable: false
          identity: true
        - name: mbi
          sqlType: varchar(11)
          nullable: false
        - name: hash
          sqlType: varchar(64)
          nullable: false
        - name: oldHash
          sqlType: varchar(64)
        - name: lastUpdated
          sqlType: timestamp with time zone
          nullable: false
  - id: FissClaim
    messageClassName: gov.cms.mpsm.rda.v1.fiss.FissClaim
    entityClassName: gov.cms.bfd.model.rda.PreAdjFissClaim
    transformerClassName: gov.cms.bfd.pipeline.rda.grpc.source.FissClaimTransformer2
    table:
      name: FissClaims
      schema: pre_adj
      primaryKeyColumns:
        - dcn
      columns:
        - name: dcn
          sqlType: varchar(23)
          nullable: false
        - name: sequenceNumber
          sqlType: bigint
          nullable: false
        - name: hicNo
          sqlType: varchar(12)
          nullable: false
        - name: currStatus
          sqlType: varchar(1)
          javaType: char
          nullable: false
        - name: currLoc1
          sqlType: varchar(1)
          javaType: char
          nullable: false
        - name: currLoc2
          sqlType: varchar(5)
          nullable: false
        - name: provStateCd
          sqlType: varchar(2)
        - name: provTypFacilCd
          sqlType: varchar(1)
        - name: provEmerInd
          sqlType: varchar(1)
        - name: provDeptId
          sqlType: varchar(3)
        - name: medaProvId
          sqlType: varchar(13)
          comment: 'Medicare Provider ID:
                  
                   <p>The Medicare Provider ID consists of the following:
                  
                   <ul>
                     <li>Provider State Code
                     <li>Provider Type Facility Code
                     <li>Provider Emergency Indicator
                     <li>Provider Department Identification
                   </ul>'
        - name: medaProv_6
          sqlType: varchar(6)
        - name: totalChargeAmount
          sqlType: decimal(11,2)
        - name: receivedDate
          sqlType: date
        - name: currTranDate
          sqlType: date
        - name: admitDiagCode
          sqlType: varchar(7)
        - name: principleDiag
          sqlType: varchar(7)
        - name: npiNumber
          sqlType: varchar(10)
        - name: fedTaxNumber
          sqlType: varchar(10)
        - name: lastUpdated
          sqlType: timestamp with time zone
        - name: pracLocAddr1
          sqlType: varchar(max)
        - name: pracLocAddr2
          sqlType: varchar(max)
        - name: pracLocCity
          sqlType: varchar(max)
        - name: pracLocState
          sqlType: varchar(2)
        - name: pracLocZip
          sqlType: varchar(15)
        - name: stmtCovFromDate
          sqlType: date
        - name: stmtCovToDate
          sqlType: date
        - name: lobCd
          sqlType: varchar(1)
        - name: servTypeCdMapping
          enumType: ServTypeCdMapping
          sqlType: varchar(20)
        - name: servTypeCd
          sqlType: varchar(1)
        - name: freqCd
          sqlType: varchar(1)
        - name: billTypCd
          sqlType: varchar(3)
        - name: apiSource
          sqlType: varchar(24)
          comment: String specifying the source of the data contained in this record. Generally this will be the version string returned by the RDA API server but when populating data from mock server it will also include information about the mode the server was running in.
        - name: rejectCd
          sqlType: varchar(5)
          comment: "Reject Code"
        - name: fullPartDenInd
          sqlType: varchar(1)
          comment: "Fully or Partially Denied Indicator"
        - name: nonPayInd
          sqlType: varchar(2)
          comment: "Non-Pay Code Indicator"
        - name: xrefDcnNbr
          sqlType: varchar(23)
          comment: "Cross-reference Document Control Number"
        - name: adjReqCd
          sqlType: char(1)
          comment: "Adjustment Requestor Identification"
        - name: adjReasCd
          sqlType: varchar(2)
          comment: "Adjustment Reason Code"
        - name: cancelXrefDcn
          sqlType: varchar(23)
          comment: "Cancel Cross-reference Document Control Number"
        - name: cancelDate
          sqlType: date
          comment: "Cancel Date"
        - name: cancAdjCd
          sqlType: char(1)
          comment: "Cancel Adjustment Code"
        - name: originalXrefDcn
          sqlType: varchar(23)
          comment: "Original Cross-Reference Document Control Number"
        - name: paidDt
          sqlType: date
          comment: "Paid Date"
        - name: admDate
          sqlType: date
          comment: "Admission Date"
        - name: admSource
          sqlType: char(1)
          comment: "Source of Admission"
        - name: primaryPayerCode
          sqlType: char(1)
          comment: "Primary Payer Code"
        - name: attendPhysId
          sqlType: varchar(16)
          comment: "Attending Physician NPI"
        - name: attendPhysLname
          sqlType: varchar(17)
          comment: "Attending Physician Last Name"
        - name: attendPhysFname
          sqlType: varchar(18)
          comment: "Attending Physician First Name"
        - name: attendPhysMint
          sqlType: varchar(1)
          comment: "Attending Physician Middle Initial"
        - name: attendPhysFlag
          sqlType: char(1)
          comment: "Attending Physician Flag"
        - name: operatingPhysId
          sqlType: varchar(16)
          comment: "Operating Physician NPI"
        - name: operPhysLname
          sqlType: varchar(17)
          comment: "Operating Physician Last Name"
        - name: operPhysFname
          sqlType: varchar(18)
          comment: "Operating Physician First Name"
        - name: operPhysMint
          sqlType: varchar(1)
          comment: "Operating Physician Middle Initial"
        - name: operPhysFlag
          sqlType: char(1)
          comment: "Operating Physician Flag"
        - name: othPhysId
          sqlType: varchar(16)
          comment: "Other Physician NPI"
        - name: othPhysLname
          sqlType: varchar(17)
          comment: "Other Physician Last Name"
        - name: othPhysFname
          sqlType: varchar(18)
          comment: "Other Physician First Name"
        - name: othPhysMint
          sqlType: varchar(1)
          comment: "Other Physician Middle Initial"
        - name: othPhysFlag
          sqlType: char(1)
          comment: "Other Physician Flag"
        - name: xrefHicNbr
          sqlType: varchar(12)
          comment: "Cross-Reference Health Insurance Claim Number"
        - name: procNewHicInd
          sqlType: char(1)
          comment: "Process new Health Insurance Claim Number"
        - name: newHic
          sqlType: varchar(12)
          comment: "New Health Insurance Claim Number"
        - name: reposInd
          sqlType: char(1)
          comment: "Repository Indicator"
        - name: reposHic
          sqlType: varchar(12)
          comment: "Repository HIC"
        - name: mbiSubmBeneInd
          sqlType: char(1)
          comment: "Health Insurance Claim (HIC) Number or Medicare Beneficiary Identify (MBI)"
        - name: adjMbiInd
          sqlType: char(1)
          comment: "Adjustment Medicare Beneficiary Identifier (MBI) Indicator"
        - name: adjMbi
          sqlType: varchar(11)
          comment: "Adjustment Medicare Beneficiary Identifier"
        - name: medicalRecordNo
          sqlType: varchar(17)
          comment: "Medical Record Number"
      joins:
        - fieldName: mbiRecord
          entityClass: gov.cms.bfd.model.rda.Mbi
          joinColumnName: mbiId
          joinType: ManyToOne
          fetchType: EAGER
    enumTypes:
      - name: ServTypeCdMapping
        values:
          - Normal
          - Clinic
          - SpecialFacility
          - Unrecognized
    transformations:
      - from: dcn
        optional: false
      - from: seq
        to: sequenceNumber
        optional: false
      - from: hicNo
        optional: false
      - from: currStatus
        optional: false
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissClaimStatus
          extractorOptions: RejectUnrecognized
      - from: currLoc1
        optional: false
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissProcessingType
      - from: currLoc2
        optional: false
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissCurrentLocation2
      - from: provStateCd
      - from: provTypFacilCd
      - from: provEmerInd
      - from: provDeptId
      - from: medaProvId
      - from: medaProv6
        to: medaProv_6
      - from: totalChargeAmount
      - from: recdDtCymd
        to: receivedDate
      - from: currTranDtCymd
        to: currTranDate
      - from: admDiagCode
        to: admitDiagCode
      - from: principleDiag
      - from: npiNumber
      - from: fedTaxNb
        to: fedTaxNumber
      - from: pracLocAddr1
      - from: pracLocAddr2
      - from: pracLocCity
      - from: pracLocState
      - from: pracLocZip
      - from: stmtCovFromCymd
        to: stmtCovFromDate
      - from: stmtCovToCymd
        to: stmtCovToDate
      - from: lobCd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissBillFacilityType
      # The servTypeCdMapping is set to one of 4 enum values depending on which of the 4
      # oneof fields has a value in the FissClaim message.
      - from: servTypeCdEnum
        to: servTypeCdMapping
        transformer: EnumValueIfPresent
        transformerOptions:
          enumName: ServTypeCdMapping
          enumValue: Normal
      - from: servTypeCdForClinicsEnum
        to: servTypeCdMapping
        transformer: EnumValueIfPresent
        transformerOptions:
          enumName: ServTypeCdMapping
          enumValue: Clinic
      - from: servTypeCdForSpecialFacilitiesEnum
        to: servTypeCdMapping
        transformer: EnumValueIfPresent
        transformerOptions:
          enumName: ServTypeCdMapping
          enumValue: SpecialFacility
      - from: servTypCdUnrecognized
        to: servTypeCdMapping
        transformer: EnumValueIfPresent
        transformerOptions:
          enumName: ServTypeCdMapping
          enumValue: Unrecognized
      # The servTypeCd value is set from one of 4 possible values in a oneof within the FissClaim.
      - from: servTypeCd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissBillClassification
          hasUnrecognized: false
      - from: servTypeCdForClinics
        to: servTypeCd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissBillClassificationForClinics
          hasUnrecognized: false
      - from: servTypeCdForSpecialFacilities
        to: servTypeCd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissBillClassificationForSpecialFacilities
          hasUnrecognized: false
      - from: servTypCdUnrecognized
        to: servTypeCd
      - from: freqCd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissBillFrequency
      - from: billTypCd
      - from: rejectCd
      - from: fullPartDenInd
      - from: nonPayInd
      - from: xrefDcnNbr
      - from: adjReqCd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissAdjustmentRequestorCode
      - from: adjReasCd
      - from: cancelXrefDcn
      - from: cancelDateCymd
        to: cancelDate
      - from: cancAdjCd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissCancelAdjustmentCode
      - from: originalXrefDcn
      - from: paidDtCymd
        to: paidDt
      - from: admDateCymd
        to: admDate
      - from: admSource
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissSourceOfAdmission
      - from: primaryPayerCode
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissPayersCode
      - from: attendPhysId
      - from: attendPhysLname
      - from: attendPhysFname
      - from: attendPhysMint
      - from: attendPhysFlag
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissPhysicianFlag
      - from: operatingPhysId
      - from: operPhysLname
      - from: operPhysFname
      - from: operPhysMint
      - from: operPhysFlag
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissPhysicianFlag
      - from: othPhysId
      - from: othPhysLname
      - from: othPhysFname
      - from: othPhysMint
      - from: othPhysFlag
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissPhysicianFlag
      - from: xrefHicNbr
      - from: procNewHicInd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissProcessNewHealthInsuranceClaimNumberIndicator
      - from: newHic
      - from: reposInd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissRepositoryIndicator
      - from: reposHic
      - from: mbiSubmBeneInd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissHealthInsuranceClaimNumberOrMedicareBeneficiaryIdentifier
      - from: adjMbiInd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissAdjustmentMedicareBeneficiaryIdentifierIndicator
      - from: adjMbi
      - from: medicalRecordNo
      - from: NOW
        to: lastUpdated
    arrays:
      - from: fissProcCodes
        to: procCodes
        mapping: FissProcCode
        namePrefix: "procCode"
      - from: fissDiagCodes
        to: diagCodes
        mapping: FissDiagnosisCode
        namePrefix: "diagCode"
      - from: fissPayers
        to: payers
        mapping: FissPayer
        namePrefix: "payer"
      - from: fissAuditTrail
        to: auditTrail
        mapping: FissAuditTrail
        namePrefix: "auditTrail"
    externalTransformations:
      - applyMbiCache

  - id: FissProcCode
    messageClassName: gov.cms.mpsm.rda.v1.fiss.FissProcedureCode
    entityClassName: gov.cms.bfd.model.rda.PreAdjFissProcCode
    table:
      name: FissProcCodes
      schema: pre_adj
      primaryKeyColumns:
        - dcn
        - priority
      columns:
        - name: dcn
          sqlType: varchar(23)
          nullable: false
        - name: priority
          sqlType: smallint
          javaType: short
          nullable: false
        - name: procCode
          sqlType: varchar(10)
          nullable: false
        - name: procFlag
          sqlType: varchar(4)
        - name: procDate
          sqlType: date
        - name: lastUpdated
          sqlType: timestamp with time zone
    transformations:
      - from: PARENT
        to: dcn
      - from: INDEX
        to: priority
      - from: procCd
        to: procCode
        optional: false
      - from: procFlag
      - from: procDt
        to: procDate
      - from: NOW
        to: lastUpdated

  - id: FissDiagnosisCode
    messageClassName: gov.cms.mpsm.rda.v1.fiss.FissDiagnosisCode
    entityClassName: gov.cms.bfd.model.rda.PreAdjFissDiagnosisCode
    table:
      name: FissDiagnosisCodes
      schema: pre_adj
      primaryKeyColumns:
        - dcn
        - priority
      columns:
        - name: dcn
          sqlType: varchar(23)
          nullable: false
        - name: priority
          sqlType: smallint
          javaType: short
          nullable: false
        - name: diagCd2
          sqlType: varchar(7)
          nullable: false
        - name: diagPoaInd
          sqlType: varchar(1)
        - name: bitFlags
          sqlType: varchar(4)
        - name: lastUpdated
          sqlType: timestamp with time zone
    transformations:
      - from: PARENT
        to: dcn
      - from: INDEX
        to: priority
      - from: diagCd2
        optional: false
      - from: diagPoaInd
        optional: false
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissDiagnosisPresentOnAdmissionIndicator
      - from: bitFlags
      - from: NOW
        to: lastUpdated

  - id: FissPayer
    messageClassName: gov.cms.mpsm.rda.v1.fiss.FissPayer
    entityClassName: gov.cms.bfd.model.rda.PreAdjFissPayer
    table:
      name: FissPayers
      schema: pre_adj
      primaryKeyColumns:
        - dcn
        - priority
      columns:
        - name: dcn
          sqlType: varchar(23)
          nullable: false
        - name: priority
          sqlType: smallint
          javaType: short
          nullable: false
        - name: payerType
          enumType: PayerType
          sqlType: varchar(20)
        - name: payersId
          sqlType: varchar(1)
        - name: payersName
          sqlType: varchar(32)
        - name: relInd
          sqlType: varchar(1)
        - name: assignInd
          sqlType: varchar(1)
        - name: providerNumber
          sqlType: varchar(13)
        - name: adjDcnIcn
          sqlType: varchar(23)
        - name: priorPmt
          sqlType: decimal(11,2)
        - name: estAmtDue
          sqlType: decimal(11,2)
        - name: beneRel
          sqlType: varchar(2)
          comment: "BeneZ only"
        - name: beneLastName
          sqlType: varchar(15)
          comment: "BeneZ only"
        - name: beneFirstName
          sqlType: varchar(10)
          comment: "BeneZ only"
        - name: beneMidInit
          sqlType: varchar(1)
          comment: "BeneZ only"
        - name: beneSsnHic
          sqlType: varchar(19)
          comment: "BeneZ only"
        - name: insuredRel
          sqlType: varchar(2)
          comment: "Insured only"
        - name: insuredName
          sqlType: varchar(25)
          comment: "Insured only"
        - name: insuredSsnHic
          sqlType: varchar(19)
          comment: "Insured only"
        - name: insuredGroupName
          sqlType: varchar(17)
        - name: insuredGroupNbr
          sqlType: varchar(20)
          comment: "Insured only"
        - name: beneDob
          sqlType: date
          comment: "BeneZ only"
        - name: beneSex
          sqlType: varchar(1)
          comment: "BeneZ only"
        - name: treatAuthCd
          sqlType: varchar(18)
        - name: insuredSex
          sqlType: varchar(1)
        - name: insuredRelX12
          sqlType: varchar(2)
        - name: insuredDob
          sqlType: date
        - name: insuredDobText
          sqlType: varchar(9)
        - name: lastUpdated
          sqlType: timestamp with time zone
    enumTypes:
      - name: PayerType
        values:
          - BeneZ
          - Insured
    transformations:
      - from: PARENT
        to: dcn
      - from: INDEX
        to: priority
      # The payerType is set to one of 2 enum values depending on which of the 2
      # nested payer fields is populated.
      - from: beneZPayer
        to: payerType
        transformer: EnumValueIfPresent
        transformerOptions:
          enumName: PayerType
          enumValue: BeneZ
      - from: insuredPayer
        to: payerType
        transformer: EnumValueIfPresent
        transformerOptions:
          enumName: PayerType
          enumValue: Insured
      - from: NONE
        to: payerType
      - from: insuredPayer.payersId
        to: payersId
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissPayersCode
      - from: insuredPayer.payersName
      - from: insuredPayer.relInd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissReleaseOfInformation
      - from: insuredPayer.assignInd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissAssignmentOfBenefitsIndicator
      - from: insuredPayer.providerNumber
      - from: insuredPayer.adjDcnIcn
      - from: insuredPayer.priorPmt
      - from: insuredPayer.estAmtDue
      - from: insuredPayer.insuredRel
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissPatientRelationshipCode
      - from: insuredPayer.insuredName
      - from: insuredPayer.insuredSsnHic
      - from: insuredPayer.insuredGroupName
      - from: insuredPayer.insuredGroupNbr
      - from: insuredPayer.treatAuthCd
      - from: insuredPayer.insuredSex
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissBeneficiarySex
      - from: insuredPayer.insuredRelX12
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissPatientRelationshipCode
      - from: insuredPayer.insuredDob
      - from: insuredPayer.insuredDobText
      - from: beneZPayer.payersId
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissPayersCode
      - from: beneZPayer.payersName
      - from: beneZPayer.relInd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissAssignmentOfBenefitsIndicator
      - from: beneZPayer.assignInd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissAssignmentOfBenefitsIndicator
      - from: beneZPayer.providerNumber
      - from: beneZPayer.adjDcnIcn
      - from: beneZPayer.priorPmt
      - from: beneZPayer.estAmtDue
      - from: beneZPayer.beneRel
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissPatientRelationshipCode
      - from: beneZPayer.beneLastName
      - from: beneZPayer.beneFirstName
      - from: beneZPayer.beneMidInit
      - from: beneZPayer.beneSsnHic
      - from: beneZPayer.insuredGroupName
      - from: beneZPayer.beneDob
      - from: beneZPayer.beneSex
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissBeneficiarySex
      - from: beneZPayer.treatAuthCd
      - from: beneZPayer.insuredSex
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissBeneficiarySex
      - from: beneZPayer.insuredRelX12
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissPatientRelationshipCode
      - from: NOW
        to: lastUpdated

  - id: FissAuditTrail
    messageClassName: gov.cms.mpsm.rda.v1.fiss.FissAuditTrail
    entityClassName: gov.cms.bfd.model.rda.PreAdjFissAuditTrail
    table:
      name: FissAuditTrails
      schema: pre_adj
      primaryKeyColumns:
        - dcn
        - priority
      columns:
        - name: dcn
          sqlType: varchar(23)
          nullable: false
        - name: priority
          sqlType: smallint
          javaType: short
          nullable: false
        - name: badtStatus
          sqlType: char(1)
        - name: badtLoc
          sqlType: varchar(5)
        - name: badtOperId
          sqlType: varchar(9)
        - name: badtReas
          sqlType: varchar(5)
        - name: badtCurrDate
          sqlType: date
        - name: lastUpdated
          sqlType: timestamp with time zone
    transformations:
      - from: PARENT
        to: dcn
      - from: INDEX
        to: priority
      - from: NOW
        to: lastUpdated
      - from: badtStatus
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.fiss.FissClaimStatus
      - from: badtLoc
      - from: badtOperId
      - from: badtReas
      - from: badtCurrDateCymd
        to: badtCurrDate

  - id: McsClaim
    messageClassName: gov.cms.mpsm.rda.v1.mcs.McsClaim
    entityClassName: gov.cms.bfd.model.rda.PreAdjMcsClaim
    transformerClassName: gov.cms.bfd.pipeline.rda.grpc.source.McsClaimTransformer2
    table:
      name: McsClaims
      schema: pre_adj
      primaryKeyColumns:
        - idrClmHdIcn
      columns:
        - name: idrClmHdIcn
          sqlType: varchar(15)
          nullable: false
        - name: sequenceNumber
          sqlType: bigint
          nullable: false
        - name: idrContrId
          sqlType: varchar(5)
          nullable: false
        - name: idrHic
          sqlType: varchar(12)
        - name: idrClaimType
          sqlType: varchar(1)
          nullable: false
        - name: idrDtlCnt
          sqlType: int
        - name: idrBeneLast_1_6
          sqlType: varchar(6)
        - name: idrBeneFirstInit
          sqlType: varchar(1)
        - name: idrBeneMidInit
          sqlType: varchar(1)
        - name: idrBeneSex
          sqlType: varchar(1)
        - name: idrStatusCode
          sqlType: varchar(1)
        - name: idrStatusDate
          sqlType: date
        - name: idrBillProvNpi
          sqlType: varchar(10)
        - name: idrBillProvNum
          sqlType: varchar(10)
        - name: idrBillProvEin
          sqlType: varchar(10)
        - name: idrBillProvType
          sqlType: varchar(2)
        - name: idrBillProvSpec
          sqlType: varchar(2)
        - name: idrBillProvGroupInd
          sqlType: varchar(1)
        - name: idrBillProvPriceSpec
          sqlType: varchar(2)
        - name: idrBillProvCounty
          sqlType: varchar(2)
        - name: idrBillProvLoc
          sqlType: varchar(2)
        - name: idrTotAllowed
          sqlType: decimal(7,2)
        - name: idrCoinsurance
          sqlType: decimal(7,2)
        - name: idrDeductible
          sqlType: decimal(7,2)
        - name: idrBillProvStatusCd
          sqlType: varchar(1)
        - name: idrTotBilledAmt
          sqlType: decimal(7,2)
        - name: idrClaimReceiptDate
          sqlType: date
        - name: idrHdrFromDateOfSvc
          sqlType: date
        - name: idrHdrToDateOfSvc
          sqlType: date
        - name: lastUpdated
          sqlType: timestamp with time zone
        - name: apiSource
          sqlType: varchar(24)
          comment: String specifying the source of the data contained in this record. Generally this will be the version string returned by the RDA API server but when populating data from mock server it will also include information about the mode the server was running in.
        - name: idrAssignment
          sqlType: char(1)
        - name: idrClmLevelInd
          sqlType: char(1)
        - name: idrHdrAudit
          sqlType: int
        - name: idrHdrAuditInd
          sqlType: char(1)
        - name: idrUSplitReason
          sqlType: char(1)
        - name: idrJReferringProvNpi
          sqlType: varchar(10)
        - name: idrJFacProvNpi
          sqlType: varchar(10)
        - name: idrUDemoProvNpi
          sqlType: varchar(10)
        - name: idrUSuperNpi
          sqlType: varchar(10)
        - name: idrUFcadjBilNpi
          sqlType: varchar(10)
        - name: idrAmbPickupAddresLine1
          sqlType: varchar(25)
        - name: idrAmbPickupAddresLine2
          sqlType: varchar(20)
        - name: idrAmbPickupCity
          sqlType: varchar(20)
        - name: idrAmbPickupState
          sqlType: varchar(2)
        - name: idrAmbPickupZipcode
          sqlType: varchar(9)
        - name: idrAmbDropoffName
          sqlType: varchar(24)
        - name: idrAmbDropoffAddrLine1
          sqlType: varchar(25)
        - name: idrAmbDropoffAddrLine2
          sqlType: varchar(20)
        - name: idrAmbDropoffCity
          sqlType: varchar(20)
        - name: idrAmbDropoffState
          sqlType: varchar(2)
        - name: idrAmbDropoffZipcode
          sqlType: varchar(9)
      joins:
        - fieldName: mbiRecord
          entityClass: gov.cms.bfd.model.rda.Mbi
          joinColumnName: mbiId
          joinType: ManyToOne
          fetchType: EAGER
    transformations:
      - from: idrClmHdIcn
        optional: false
      - from: sequenceNumber
      - from: idrContrId
        optional: false
      - from: idrHic
      - from: idrClaimType
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsClaimType
      - from: idrDtlCnt
      - from: idrBeneLast16
        to: idrBeneLast_1_6
      - from: idrBeneFirstInit
      - from: idrBeneMidInit
      - from: idrBeneSex
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsBeneficiarySex
      - from: idrStatusCode
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsStatusCode
          extractorOptions: RejectUnrecognized
          unsupportedEnumValues: STATUS_CODE_NOT_USED
      - from: idrStatusDate
      - from: idrBillProvNpi
      - from: idrBillProvNum
      - from: idrBillProvEin
      - from: idrBillProvType
      - from: idrBillProvSpec
      - from: idrBillProvGroupInd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsBillingProviderIndicator
      - from: idrBillProvPriceSpec
      - from: idrBillProvCounty
      - from: idrBillProvLoc
      - from: idrTotAllowed
      - from: idrCoinsurance
      - from: idrDeductible
      - from: idrBillProvStatusCd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsBillingProviderStatusCode
      - from: idrTotBilledAmt
      - from: idrClaimReceiptDate
      - from: idrHdrFromDos
        to: idrHdrFromDateOfSvc
      - from: idrHdrToDos
        to: idrHdrToDateOfSvc
      - from: idrAssignment
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsClaimAssignmentCode
      - from: idrClmLevelInd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsClaimLevelIndicator
      - from: idrHdrAudit
      - from: idrHdrAuditInd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsAuditIndicator
      - from: idrUSplitReason
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsSplitReasonCode
      - from: idrJReferringProvNpi
      - from: idrJFacProvNpi
      - from: idrUDemoProvNpi
      - from: idrUSuperNpi
      - from: idrUFcadjBilNpi
      - from: idrAmbPickupAddresLine1
      - from: idrAmbPickupAddresLine2
      - from: idrAmbPickupCity
      - from: idrAmbPickupState
      - from: idrAmbPickupZipcode
      - from: idrAmbDropoffName
      - from: idrAmbDropoffAddrLine1
      - from: idrAmbDropoffAddrLine2
      - from: idrAmbDropoffCity
      - from: idrAmbDropoffState
      - from: idrAmbDropoffZipcode
      - from: NOW
        to: lastUpdated
    arrays:
      - from: mcsDetails
        to: details
        mapping: McsDetail
        namePrefix: detail
      - from: mcsDiagnosisCodes
        to: diagCodes
        mapping: McsDiagnosisCode
        namePrefix: diagCode
      - from: mcsAdjustments
        to: adjustments
        mapping: McsAdjustment
        namePrefix: adjustment
      - from: mcsAudits
        to: audits
        mapping: McsAudit
        namePrefix: audit
      - from: mcsLocations
        to: locations
        mapping: McsLocation
        namePrefix: location
    externalTransformations:
      - applyMbiCache

  - id: McsDetail
    messageClassName: gov.cms.mpsm.rda.v1.mcs.McsDetail
    entityClassName: gov.cms.bfd.model.rda.PreAdjMcsDetail
    table:
      name: McsDetails
      schema: pre_adj
      primaryKeyColumns:
        - idrClmHdIcn
        - priority
      columns:
        - name: idrClmHdIcn
          sqlType: varchar(15)
          nullable: false
        - name: priority
          sqlType: smallint
          javaType: short
          nullable: false
        - name: idrDtlStatus
          sqlType: varchar(1)
        - name: idrDtlFromDate
          sqlType: date
        - name: idrDtlToDate
          sqlType: date
        - name: idrProcCode
          sqlType: varchar(5)
        - name: idrModOne
          sqlType: varchar(2)
        - name: idrModTwo
          sqlType: varchar(2)
        - name: idrModThree
          sqlType: varchar(2)
        - name: idrModFour
          sqlType: varchar(2)
        - name: idrDtlDiagIcdType
          sqlType: varchar(1)
        - name: idrDtlPrimaryDiagCode
          sqlType: varchar(7)
        - name: idrKPosLnameOrg
          sqlType: varchar(60)
        - name: idrKPosFname
          sqlType: varchar(35)
        - name: idrKPosMname
          sqlType: varchar(25)
        - name: idrKPosAddr1
          sqlType: varchar(55)
        - name: idrKPosAddr2_1st
          sqlType: varchar(30)
        - name: idrKPosAddr2_2nd
          sqlType: varchar(25)
        - name: idrKPosCity
          sqlType: varchar(30)
        - name: idrKPosState
          sqlType: varchar(2)
        - name: idrKPosZip
          sqlType: varchar(15)
        - name: idrTos
          sqlType: char(1)
        - name: idrTwoDigitPos
          sqlType: varchar(2)
        - name: idrDtlRendType
          sqlType: varchar(2)
        - name: idrDtlRendSpec
          sqlType: varchar(2)
        - name: idrDtlRendNpi
          sqlType: varchar(10)
        - name: idrDtlRendProv
          sqlType: varchar(10)
        - name: idrKDtlFacProvNpi
          sqlType: varchar(10)
        - name: idrDtlAmbPickupAddres1
          sqlType: varchar(25)
        - name: idrDtlAmbPickupAddres2
          sqlType: varchar(20)
        - name: idrDtlAmbPickupCity
          sqlType: varchar(20)
        - name: idrDtlAmbPickupState
          sqlType: varchar(2)
        - name: idrDtlAmbPickupZipcode
          sqlType: varchar(9)
        - name: idrDtlAmbDropoffName
          sqlType: varchar(24)
        - name: idrDtlAmbDropoffAddrL1
          sqlType: varchar(25)
        - name: idrDtlAmbDropoffAddrL2
          sqlType: varchar(20)
        - name: idrDtlAmbDropoffCity
          sqlType: varchar(20)
        - name: idrDtlAmbDropoffState
          sqlType: varchar(2)
        - name: idrDtlAmbDropoffZipcode
          sqlType: varchar(9)
        - name: lastUpdated
          sqlType: timestamp with time zone
    transformations:
      - from: PARENT
        to: idrClmHdIcn
      - from: INDEX
        to: priority
      - from: idrDtlStatus
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsDetailStatus
      - from: idrDtlFromDate
      - from: idrDtlToDate
      - from: idrProcCode
      - from: idrModOne
      - from: idrModTwo
      - from: idrModThree
      - from: idrModFour
      - from: idrDtlDiagIcdType
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsDiagnosisIcdType
      - from: idrDtlPrimaryDiagCode
      - from: idrKPosLnameOrg
      - from: idrKPosFname
      - from: idrKPosMname
      - from: idrKPosAddr1
      - from: idrKPosAddr21St
        to: idrKPosAddr2_1st
      - from: idrKPosAddr22Nd
        to: idrKPosAddr2_2nd
      - from: idrKPosCity
      - from: idrKPosState
      - from: idrKPosZip
      - from: idrTos
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsTypeOfService
      - from: idrTwoDigitPos
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsTwoDigitPlanOfService
      - from: idrDtlRendType
      - from: idrDtlRendSpec
      - from: idrDtlRendNpi
      - from: idrDtlRendProv
      - from: idrKDtlFacProvNpi
      - from: idrDtlAmbPickupAddres1
      - from: idrDtlAmbPickupAddres2
      - from: idrDtlAmbPickupCity
      - from: idrDtlAmbPickupState
      - from: idrDtlAmbPickupZipcode
      - from: idrDtlAmbDropoffName
      - from: idrDtlAmbDropoffAddrL1
      - from: idrDtlAmbDropoffAddrL2
      - from: idrDtlAmbDropoffCity
      - from: idrDtlAmbDropoffState
      - from: idrDtlAmbDropoffZipcode
      - from: NOW
        to: lastUpdated

  - id: McsDiagnosisCode
    messageClassName: gov.cms.mpsm.rda.v1.mcs.McsDiagnosisCode
    entityClassName: gov.cms.bfd.model.rda.PreAdjMcsDiagnosisCode
    table:
      name: McsDiagnosisCodes
      schema: pre_adj
      primaryKeyColumns:
        - idrClmHdIcn
        - priority
      columns:
        - name: idrClmHdIcn
          sqlType: varchar(15)
          nullable: false
        - name: priority
          sqlType: smallint
          javaType: short
          nullable: false
        - name: idrDiagIcdType
          sqlType: varchar(1)
        - name: idrDiagCode
          sqlType: varchar(7)
          nullable: false
        - name: lastUpdated
          sqlType: timestamp with time zone
    transformations:
      - from: PARENT
        to: idrClmHdIcn
      - from: INDEX
        to: priority
      - from: idrDiagIcdType
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsDiagnosisIcdType
      - from: idrDiagCode
        optional: false
      - from: NOW
        to: lastUpdated

  - id: McsAdjustment
    messageClassName: gov.cms.mpsm.rda.v1.mcs.McsAdjustment
    entityClassName: gov.cms.bfd.model.rda.PreAdjMcsAdjustment
    table:
      name: McsAdjustments
      schema: pre_adj
      primaryKeyColumns:
        - idrClmHdIcn
        - priority
      columns:
        - name: idrClmHdIcn
          sqlType: varchar(15)
          nullable: false
        - name: priority
          sqlType: smallint
          javaType: short
          nullable: false
        - name: lastUpdated
          sqlType: timestamp with time zone
        - name: idrAdjDate
          sqlType: date
        - name: idrXrefIcn
          sqlType: varchar(15)
        - name: idrAdjClerk
          sqlType: varchar(4)
        - name: idrInitCcn
          sqlType: varchar(15)
        - name: idrAdjChkWrtDt
          sqlType: date
        - name: idrAdjBEombAmt
          sqlType: decimal(7,2)
        - name: idrAdjPEombAmt
          sqlType: decimal(7,2)
    transformations:
      - from: PARENT
        to: idrClmHdIcn
      - from: INDEX
        to: priority
      - from: NOW
        to: lastUpdated
      - from: idrAdjDate
      - from: idrXrefIcn
      - from: idrAdjClerk
      - from: idrInitCcn
      - from: idrAdjChkWrtDt
      - from: idrAdjBEombAmt
      - from: idrAdjPEombAmt

  - id: McsAudit
    messageClassName: gov.cms.mpsm.rda.v1.mcs.McsAudit
    entityClassName: gov.cms.bfd.model.rda.PreAdjMcsAudit
    table:
      name: McsAudits
      schema: pre_adj
      primaryKeyColumns:
        - idrClmHdIcn
        - priority
      columns:
        - name: idrClmHdIcn
          sqlType: varchar(15)
          nullable: false
        - name: priority
          sqlType: smallint
          javaType: short
          nullable: false
        - name: lastUpdated
          sqlType: timestamp with time zone
        - name: idrJAuditNum
          sqlType: int
        - name: idrJAuditInd
          sqlType: char(1)
        - name: idrJAuditDisp
          sqlType: char(1)
    transformations:
      - from: PARENT
        to: idrClmHdIcn
      - from: INDEX
        to: priority
      - from: NOW
        to: lastUpdated
      - from: idrJAuditNum
      - from: idrJAuditInd
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsCutbackAuditIndicator
      - from: idrJAuditDisp
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsCutbackAuditDisposition

  - id: McsLocation
    messageClassName: gov.cms.mpsm.rda.v1.mcs.McsLocation
    entityClassName: gov.cms.bfd.model.rda.PreAdjMcsLocation
    table:
      name: McsLocations
      schema: pre_adj
      primaryKeyColumns:
        - idrClmHdIcn
        - priority
      columns:
        - name: idrClmHdIcn
          sqlType: varchar(15)
          nullable: false
        - name: priority
          sqlType: smallint
          javaType: short
          nullable: false
        - name: lastUpdated
          sqlType: timestamp with time zone
        - name: idrLocClerk
          sqlType: varchar(4)
        - name: idrLocCode
          sqlType: varchar(3)
        - name: idrLocDate
          sqlType: date
        - name: idrLocActvCode
          sqlType: char(1)
    transformations:
      - from: PARENT
        to: idrClmHdIcn
      - from: INDEX
        to: priority
      - from: NOW
        to: lastUpdated
      - from: idrLocClerk
      - from: idrLocCode
      - from: idrLocDate
      - from: idrLocActvCode
        transformer: MessageEnum
        transformerOptions:
          enumClass: gov.cms.mpsm.rda.v1.mcs.McsLocationActivityCode
