mappings:
- entityClassName: gov.cms.bfd.model.rif.entities.S3DataFile
  id: S3DataFile
  nullableFieldAccessorType: Optional
  table:
    name: s3_data_files
    primaryKeyColumns:
    - parentManifest
    - fileName
    columns:
    - comment: Foreign key to manifest that contains this file.
      dbName: manifest_id
      name: manifestId
      sqlType: bigint
      nullable: false
      dbOnly: true
    - comment: Index (zero based) of file within the manifest.
      name: index
      sqlType: smallint
      nullable: false
    - comment: Name of file as defined in manifest.
      dbName: file_name
      name: fileName
      sqlType: varchar(128)
      nullable: false
    - comment: Type of file as defined in manifest.
      dbName: file_type
      name: fileType
      sqlType: varchar(50)
      nullable: false
    - comment: Path to the file within S3 bucket.
      dbName: s3_path
      name: s3Path
      nullable: false
      sqlType: varchar(1024)
    - comment: Status of the file.  Updated by ETL pipeline during processing.
      dbName: status
      name: status
      nullable: false
      sqlType: varchar(24)
      enumType: FileStatus
    - comment: When the file was first discovered in S3.
      dbName: discovery_timestamp
      name: discoveryTimestamp
      nullable: false
      sqlType: timestamp with time zone
    - comment: When the file was fully processed or rejected.
      dbName: completion_timestamp
      name: completionTimestamp
      nullable: true
      sqlType: timestamp with time zone
    joins:
    - class: child
      entityMapping: S3ManifestFile
      fieldName: parentManifest
      joinColumnName: manifestId
  enumTypes:
  - name: FileStatus
    values:
    - DISCOVERED
    - REJECTED
    - STARTED
    - COMPLETED
