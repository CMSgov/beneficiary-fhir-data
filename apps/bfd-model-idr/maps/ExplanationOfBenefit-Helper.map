map "https://bfd.cms.gov/MappingLanguage/Maps/ExplanationOfBenefit-Helper" = "eob-support-map"

conceptmap "FinalActionIndicator" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "http://hl7.org/fhir/explanationofbenefit-status"

  s:Y == t:"active"
  s:N == t:"cancelled"
}

conceptmap "PRVDR_ID_QLFYR_CD" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "http://bluebutton.cms.gov/fhir/CodeSystem/PRVDR-ID-QLFYR-CD"
  
  s:"01" == t:"NPI Number"
  s:"06" == t:"UPIN"
  s:"07" == t:"NCPDP Number"
  s:"08" == t:"State License Number"
  s:"11" == t:"TIN"
  s:"12" == t:"DEA"
  s:"99" == t:"Other mandatory for Standard Data Format"

}

conceptmap "FED_PRVDR_SPCLTY_TO_TAXONOMY" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "http://nucc.org/provider-taxonomy"

  s:"1" == t:"208D00000X"
  s:"2" == t:"208600000X"
  s:"3" == t:"207K00000X"
  s:"4" == t:"207Y00000X"
  s:"5" == t:"207L00000X"
  s:"6" == t:"207RC0000X"
  s:"7" == t:"207N00000X"
  s:"8" == t:"207Q00000X"
  s:"9" == t:"208VP0014X"
  s:"10" == t:"207RG0100X"
  s:"11" == t:"207R00000X"
  s:"12" == t:"204D00000X"
  s:"13" == t:"2084N0400X"
  s:"14" == t:"207T00000X"
  s:"63" == t:"335V00000X"
  s:"64" == t:"231H00000X"
  s:"65" == t:"225100000X"
  s:"66" == t:"207RR0500X"
  s:"67" == t:"225X00000X"
  s:"68" == t:"103TC0700X"
  s:"69" == t:"291U00000X"
  s:"70" == t:"193200000X"
  s:"71" == t:"133V00000X"
  s:"72" == t:"208VP0000X"
  s:"74" == t:"261QX0203X"
  s:"76" == t:"2086S0129X"
  s:"77" == t:"2086S0129X"
  s:"78" == t:"2086S0129X"
  s:"79" == t:"207RA0401X"
  s:"80" == t:"1041C0700X"
  s:"81" == t:"207RC0200X"
  s:"82" == t:"207RH0000X"
  s:"83" == t:"207RH0003X"
  s:"84" == t:"2083P0901X"
  s:"85" == t:"204E00000X"
  s:"86" == t:"2084N0600X"
  s:"89" == t:"364S00000X"
  s:"90" == t:"207RX0202X"
  s:"91" == t:"2086X0206X"
  s:"92" == t:"2085R0001X"
  s:"93" == t:"207P00000X"
  s:"94" == t:"2085R0204X"
  s:"96" == t:"156FX1800X"
  s:"97" == t:"363A00000X"
  s:"98" == t:"207VX0201X"
  s:"A0" == t:"282N00000X"
  s:"A1" == t:"314000000X"
  s:"A2" == t:"313M00000X"
  s:"A3" == t:"313M00000X"
  s:"A4" == t:"251E00000X"
  s:"A5" == t:"333600000X"
  s:"A6" == t:"332B00000X"
  s:"A7" == t:"332B00000X"
  s:"A8" == t:"332B00000X"
}

conceptmap "CLM_LTST_CLM_IND" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "http://hl7.org/fhir/explanationofbenefit-status"

  s:Y == t:"active"
  s:N == t:"cancelled"
}

conceptmap "CLM_TYPE_CD" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "http://terminology.hl7.org/CodeSystem/claim-type"

  s:1 == t:"pharmacy"
  s:2 == t:"pharmacy"
  s:3 == t:"pharmacy"
  s:4 == t:"pharmacy"
  s:10 == t:"institutional"
  s:20 == t:"institutional"
  s:30 == t:"institutional"
  s:40 == t:"institutional"
  s:50 == t:"institutional"
  s:60 == t:"institutional"
  s:61 == t:"institutional"
  s:62 == t:"institutional"
  s:63 == t:"institutional"
  s:71 == t:"professional"
  s:72 == t:"professional"
  s:81 == t:"professional"
  s:82 == t:"professional"
  s:1011 == t:"institutional"
  s:2011 == t:"institutional"
}

conceptmap "RIC_CD" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "https://hl7.org/fhir/string"

  s:M == t:"Part B"
  s:O == t:"Part B"
  s:U == t:"Part A"
  s:V == t:"Part A"
  s:W == t:"Part B"
}

conceptmap "profile_metadata" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "https://hl7.org/fhir/string"

  s:1 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Pharmacy|2.1.0"
  s:2 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Pharmacy|2.1.0"
  s:3 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Pharmacy|2.1.0"
  s:4 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Pharmacy|2.1.0"
  s:10 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Inpatient-Institutional|2.1.0"
  s:20 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Inpatient-Institutional|2.1.0"
  s:30 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Inpatient-Institutional|2.1.0"
  s:40 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Outpatient-Institutional|2.1.0"
  s:50 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Inpatient-Institutional|2.1.0"
  s:60 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Inpatient-Institutional|2.1.0"
  s:61 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Inpatient-Institutional|2.1.0"
  s:62 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Inpatient-Institutional|2.1.0"
  s:63 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Inpatient-Institutional|2.1.0"
  s:71 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Professional-NonClinician|2.1.0"
  s:72 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Professional-NonClinician|2.1.0"
  s:81 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Professional-NonClinician|2.1.0"
  s:82 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Professional-NonClinician|2.1.0"
  s:1011 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Inpatient-Institutional|2.1.0"
  s:2011 == t:"http://hl7.org/fhir/us/carin-bb/StructureDefinition/C4BB-ExplanationOfBenefit-Inpatient-Institutional|2.1.0"
}

conceptmap "subtype" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBInstitutionalClaimSubType"

  s:10 == t:"inpatient"
  s:20 == t:"inpatient"
  s:30 == t:"inpatient"
  s:40 == t:"outpatient"
  s:50 == t:"inpatient"
  s:60 == t:"inpatient"
  s:61 == t:"inpatient"
  s:62 == t:"inpatient"
  s:63 == t:"inpatient"
  s:1011 == t:"inpatient"
  s:1041 == t:"inpatient"
  s:2011 == t:"inpatient"
  s:2041 == t:"inpatient"
}

conceptmap "CLM_SRC_ID" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "https://hl7.org/fhir/string"

  s:"N/A" == t:"Medicaid"
  s:"20000" == t:"NCH"
  s:"21000" == t:"FISS"
  s:"22000" == t:"MCS"
  s:"23000" == t:"VMS"
  s:"24000" == t:"EDPS"
  s:"25000" == t:"EncounterMedicaidDuals"
}

conceptmap "META_SRC_SK" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "https://hl7.org/fhir/string"

  s:"1" == t:"DDPS"
  s:"7" == t:"NCH"
  s:"1001" == t:"MCS"
  s:"1002" == t:"VMS"
  s:"1003" == t:"FISS"
}

conceptmap "SYSTEM_TYPE" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "https://bluebutton.cms.gov/fhir/CodeSystem/System-Type"

  s:"20000" == t:"NationalClaimsHistory"
  s:"21000" == t:"SharedSystem"
  s:"22000" == t:"SharedSystem"
  s:"23000" == t:"SharedSystem"
}

conceptmap "FINAL_ACTION" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "https://bluebutton.cms.gov/fhir/CodeSystem/Final-Action"

  s:"Y" == t:"FinalAction"
  s:"N" == t:"NotFinalAction"
}

conceptmap "CLM_AUDT_TRL_STUS_CD_MCS" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "https://hl7.org/fhir/string"

  s:"A" = t:"queued"
  s:"B" = t:"queued"
  s:"C" = t:"partial"
  s:"D" = t:"complete"
  s:"E" = t:"complete"
  s:"F" = t:"complete"
  s:"G" = t:"complete"
  s:"J" = t:"queued"
  s:"K" = t:"queued"
  s:"L" = t:"partial"
  s:"M" = t:"complete"
  s:"N" = t:"complete"
  s:"P" = t:"complete"
  s:"Q" = t:"complete"
  s:"R" = t:"complete"
  s:"U" = t:"complete"
  s:"V" = t:"complete"
  s:"W" = t:"complete"
  s:"X" = t:"complete"
  s:"Y" = t:"complete"
  s:"Z" = t:"complete"
  s:"1" = t:"queued"
  s:"2" = t:"queued"
  s:"3" = t:"partial"
  s:"4" = t:"complete"
  s:"5" = t:"complete"
  s:"6" = t:"error"
  s:"8" = t:"complete"
  s:"9" = t:"complete"
}

// Separate concept map for FISS since outcome differs for codes F & M
conceptmap "CLM_AUDT_TRL_STUS_CD_FISS" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "https://hl7.org/fhir/string"

  s:"A" == t:"queued"
  s:"F" == t:"partial"
  s:"I" == t:"partial"
  s:"S" == t:"partial"
  s:"M" == t:"partial"
  s:"P" == t:"complete"
  s:"R" == t:"complete"
  s:"D" == t:"complete"
  s:"T" == t:"partial"
  s:"U" == t:"complete"
}

conceptmap "CLM_DGNS_PRCDR_ICD_IND_PROCEDURE" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "https://hl7.org/fhir/string"

  s:" " == t:"http://www.cms.gov/Medicare/Coding/ICD9"
  s:"9" == t:"http://www.cms.gov/Medicare/Coding/ICD9"
  s:"0" == t:"http://www.cms.gov/Medicare/Coding/ICD10"
}

conceptmap "CLM_DGNS_PRCDR_ICD_IND_DIAGNOSIS" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "https://hl7.org/fhir/string"

  s:" " == t:"http://hl7.org/fhir/sid/icd-9-cm"
  s:"9" == t:"http://hl7.org/fhir/sid/icd-9-cm"
  s:"0" == t:"http://hl7.org/fhir/sid/icd-10-cm"
}

conceptmap "HL7_DIAGTYPE" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "http://terminology.hl7.org/CodeSystem/ex-diagnosistype"

  s:"A" == t:"admitting"
  s:"P" == t:"principal"
}

conceptmap "C4BB_DIAGTYPE" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBClaimDiagnosisType"

  s:"1" == t:"externalcauseofinjury"
  s:"D" == t:"other"
  s:"E" == t:"externalcauseofinjury"
  s:"R" == t:"patientreasonforvisit"
}

conceptmap "C4BB_DIAGTYPE_PROF" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBClaimDiagnosisType"

  s:"D" == t:"secondary"
}

conceptmap "C4BB-SupportingInfo-Categories" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBSupportingInfoType"

  s:"CLM_ACTV_CARE_FROM_DT" == t:"admissionperiod"
  s:"CLM_ADMSN_TYPE_CD" == t:"admtype"
  s:"CLM_SUBMSN_DT" == t:"clmrecvddate"
  s:"BENE_PTNT_STUS_CD" == t:"discharge-status"
  s:"DGNS_DRG_CD" == t:"drg"
  s:"CLM_ADMSN_SRC_CD" == t:"pointoforigin"
  s:"TYPE_OF_BILL_CD" == t:"typeofbill"
  s:"CLM_LINE_DAYS_SUPLY_QTY" == t:"dayssupply"
  s:"CLM_LINE_RX_FILL_NUM" == t:"refillnum"
  s:"CLM_DAW_PROD_SLCTN_CD" == t:"dawcode"
  s:"CLM_CMPND_CD" == t:"compoundcode"
  s:"CLM_BRND_GNRC_CD" == t:"brandgenericindicator"
  s:"CLM_LINE_RX_ORGN_CD" == t:"rxorigincode"
  s:"CLM_LINE_AUTHRZD_FILL_NUM" == t:"refillsauthorized"

}

conceptmap "UnitTransform" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "http://unitsofmeasure.org"

  s:"ML" == t:"mL"
  s:"ME" == t:"mg"
  s:"UN" == t:"[arb'U]"
  s:"F2" == t:"[IU]"
  s:"GR" == t:"g"
  s:"EA" == t:"[arb'U]"

}

//Not completed, this is an example.
conceptmap "SSAToUSPSState" {
  prefix s = "https://hl7.org/fhir/string"
  prefix t = "https://hl7.org/fhir/string"

  s:"01" == t:"AL"
  s:"02" == t:"AK"
  s:"03" == t:"AZ"
  s:"04" == t:"AR"
  s:"05" == t:"CA"
  s:"06" == t:"CO"

}
