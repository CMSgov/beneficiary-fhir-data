- inputPath: ExplanationOfBenefit-Pharmacy.CLM_UNIQ_ID
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - PDE_ID
  cclfMapping:
    - CCLF7.CUR_CLM_UNIQ_ID
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_UNIQ_ID
  fhirPath: ExplanationOfBenefit.identifier.where(type.coding.system = 'http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBIdentifierType' and type.coding.code = 'uc' ).value
- inputPath: ExplanationOfBenefit-Pharmacy.CLM_ORIG_CNTL_NUM
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_ORIG_CNTL_NUM
  fhirPath: ExplanationOfBenefit.identifier.where(system = 'https://bluebutton.cms.gov/identifiers/CLM-CNTL-NUM').value
- inputPath: ExplanationOfBenefit-Pharmacy.CLM_TYPE_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  cclfMapping:
    - CCLF7.CLM_TYPE_CD
  referenceTable: CLM_TYPE_CD
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_TYPE_CD
  fhirPath: ExplanationOfBenefit.type.coding.where(system = 'https://bluebutton.cms.gov/fhir/CodeSystem/CLM-TYPE-CD').code
- inputPath: ExplanationOfBenefit-Pharmacy.CLM_BENE_XREF_EFCTV_SK
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  bfdDerived: True
  fhirPath: ExplanationOfBenefit.patient.reference.substring(8)
- inputPath: ExplanationOfBenefit-Pharmacy.CLM_FROM_DT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_FROM_DT
  fhirPath: ExplanationOfBenefit.billablePeriod.start
- inputPath: ExplanationOfBenefit-Pharmacy.CLM_THRU_DT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_THRU_DT
  fhirPath: ExplanationOfBenefit.billablePeriod.end
- inputPath: ExplanationOfBenefit-Pharmacy.CLM_EFCTV_DT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  cclfMapping:
    - CCLF7.CLM_EFCTV_DT
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_EFCTV_DT
  fhirPath: ExplanationOfBenefit.created
- inputPath: ExplanationOfBenefit-Pharmacy.CLM_SRC_ID
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  referenceTable: CLM_SRC_ID
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_SRC_ID
  fhirPath: ExplanationOfBenefit.meta.source
- inputPath: ExplanationOfBenefit-Pharmacy.PRVDR_SRVC_PRVDR_NPI_NUM
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - SRVC_PRVDR_ID
  cclfMapping:
    - CCLF7.CLM_SRVC_PRVDR_GNRC_ID_NUM
  sourceView: V2_MDCR_CLM
  sourceColumn: PRVDR_SRVC_PRVDR_NPI_NUM
  fhirPath: ExplanationOfBenefit.contained.where(id = %root.provider.reference.substring(1)).identifier.where(system='http://hl7.org/fhir/sid/us-npi').value
  notes: Only NPIs are currently supported. CCLF7.CLM_SRVC_PRVDR_GNRC_ID_NUM can provide NCPDP numbers in .008% of instances, and this may be handled in a future BFD enhancement. 
- inputPath: ExplanationOfBenefit-Pharmacy.PRVDR_PRSCRBNG_PRVDR_NPI_NUM
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - PRSCRBR_ID
  cclfMapping:
    - CCLF7.CLM_PRSBNG_PRVDR_GNRC_ID_NUM
  sourceView: V2_MDCR_CLM
  sourceColumn: PRVDR_PRSCRBNG_PRVDR_NPI_NUM
  fhirPath: ExplanationOfBenefit.contained.where(id = %root.careTeam.where(role.coding.code='prescribing').provider.reference.substring(1)).identifier.where(system='http://hl7.org/fhir/sid/us-npi').value
- inputPath: ExplanationOfBenefit-Pharmacy.PRVDR_LAST_NAME
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_PRVDR_HSTRY
  sourceColumn: PRVDR_LAST_NAME
  fhirPath: ExplanationOfBenefit.contained.where(id = %root.careTeam.where(role.coding.code='prescribing').provider.reference.substring(1)).name.family
- inputPath: ExplanationOfBenefit-Pharmacy.CLM_PD_DT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - PD_DT
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_PD_DT
  fhirPath: ExplanationOfBenefit.payment.date
- inputPath: SupportingInfoComponent.CLM_CMS_PROC_DT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM_DT_SGNTR
  sourceColumn: CLM_CMS_PROC_DT
  fhirPath: ExplanationOfBenefit.supportingInfo.where(category.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/Supporting-Information').exists() and category.coding.where(code='CLM_CMS_PROC_DT').exists()).code.coding.code
- inputPath: SupportingInfoComponent.CLM_SBMT_FRMT_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - NSTD_FRMT_CD
  referenceTable: CLM_SBMT_FRMT_CD
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_SBMT_FRMT_CD
  fhirPath: ExplanationOfBenefit.supportingInfo.where(category.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/Supporting-Information').exists() and category.coding.where(code='CLM_SBMT_FRMT_CD').exists()).code.coding.code
- inputPath: ExplanationOfBenefit-Pharmacy.CLM_BENE_PMT_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - PTNT_PAY_AMT
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_BENE_PMT_AMT
  fhirPath: ExplanationOfBenefit.total.where(category.coding.where(system='http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBAdjudication' and code='paidbypatient').exists() and category.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and code='CLM_BENE_PMT_AMT').exists()).amount.value
- inputPath: ExplanationOfBenefit-Pharmacy.CLM_OTHR_TP_PD_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_OTHR_TP_PD_AMT
  fhirPath: ExplanationOfBenefit.total.where(category.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and code='CLM_OTHR_TP_PD_AMT').exists()).amount.value
- inputPath: SupportingInfoComponent.CLM_SBMTR_CNTRCT_NUM
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - PLAN_CNTRCT_REC_ID
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_SBMTR_CNTRCT_NUM
  fhirPath: ExplanationOfBenefit.supportingInfo.where(category.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/Supporting-Information').exists() and category.coding.where(code='CLM_SBMTR_CNTRCT_NUM').exists()).code.coding.code
- inputPath: SupportingInfoComponent.CLM_SBMTR_CNTRCT_PBP_NUM
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - PLAN_PBP_REC_NUM
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_SBMTR_CNTRCT_PBP_NUM
  fhirPath: ExplanationOfBenefit.supportingInfo.where(category.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/Supporting-Information').exists() and category.coding.where(code='CLM_SBMTR_CNTRCT_PBP_NUM').exists()).code.coding.code
- inputPath: ExplanationOfBenefit-Pharmacy.CNTRCT_PBP_NAME
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CNTRCT_PBP_NUM
  sourceColumn: CNTRCT_PBP_NAME
  fhirPath: ExplanationOfBenefit.contained.where(id='insurer-org').name
- inputPath: LineItemComponent.CLM_LINE_NUM
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM_LINE
  sourceColumn: CLM_LINE_NUM
  fhirPath: ExplanationOfBenefit.item.sequence
- inputPath: LineItemComponent.CLM_LINE_FROM_DT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - SRVC_DT
  cclfMapping:
    - CCLF7.CLM_LINE_FROM_DT
  sourceView: V2_MDCR_CLM_LINE
  sourceColumn: CLM_LINE_FROM_DT
  fhirPath: ExplanationOfBenefit.item.serviced
- inputPath: LineItemComponent.CLM_LINE_NDC_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - PROD_SRVC_ID
  cclfMapping:
    - CCLF7.CLM_LINE_NDC_CD
  sourceView: V2_MDCR_CLM_LINE
  sourceColumn: CLM_LINE_NDC_CD
  fhirPath: (ExplanationOfBenefit.item.productOrService.coding|ExplanationOfBenefit.item.detail.productOrService.coding).where(system = 'http://hl7.org/fhir/sid/ndc').code
- inputPath: LineItemComponent.CLM_LINE_NDC_QTY
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - QTY_DSPNSD_NUM
  sourceView: V2_MDCR_CLM_LINE
  sourceColumn: CLM_LINE_NDC_QTY
  fhirPath: (ExplanationOfBenefit.item.quantity|ExplanationOfBenefit.item.detail.quantity).value
- inputPath: LineItemComponent.CLM_LINE_NDC_QTY_QLFYR_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM_LINE
  sourceColumn: CLM_LINE_NDC_QTY_QLFYR_CD
  fhirPath: (ExplanationOfBenefit.item.quantity|ExplanationOfBenefit.item.detail.quantity).unit
- inputPath: LineItemComponent.CLM_LINE_CVRD_PD_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM_LINE
  sourceColumn: CLM_LINE_CVRD_PD_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.where(system='http://terminology.hl7.org/CodeSystem/adjudication' and code='benefit').exists()).amount.value
- inputPath: LineItemComponent.CLM_LINE_BENE_PMT_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - PTNT_PAY_AMT
  cclfMapping:
    - CCLF7.CLM_LINE_BENE_PMT_AMT
  sourceView: V2_MDCR_CLM_LINE
  sourceColumn: CLM_LINE_BENE_PMT_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.where(system='http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBAdjudication' and code='paidbypatient').exists() and category.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and code='CLM_LINE_BENE_PMT_AMT').exists()).amount.value
- inputPath: LineItemComponent.CLM_LINE_GRS_ABOVE_THRSHLD_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - GDC_ABV_OOPT_AMT
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_GRS_ABOVE_THRSHLD_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_LINE_GRS_ABOVE_THRSHLD_AMT').amount.value
- inputPath: LineItemComponent.CLM_LINE_GRS_BLW_THRSHLD_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - GDC_BLW_OOPT_AMT
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_GRS_BLW_THRSHLD_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_LINE_GRS_BLW_THRSHLD_AMT').amount.value
- inputPath: LineItemComponent.CLM_LINE_LIS_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - LICS_AMT
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_LIS_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_LINE_LIS_AMT').amount.value
- inputPath: LineItemComponent.CLM_LINE_TROOP_TOT_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - OTHR_TROOP_AMT
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_TROOP_TOT_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_LINE_TROOP_TOT_AMT').amount.value
- inputPath: LineItemComponent.CLM_LINE_PLRO_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - PLRO_AMT
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_PLRO_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_LINE_PLRO_AMT').amount.value
- inputPath: LineItemComponent.CLM_RPTD_MFTR_DSCNT_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - RPTD_GAP_DSCNT_NUM
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_RPTD_MFTR_DSCNT_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_RPTD_MFTR_DSCNT_AMT').amount.value
- inputPath: LineItemComponent.CLM_LINE_INGRDNT_CST_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_INGRDNT_CST_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_LINE_INGRDNT_CST_AMT').amount.value
- inputPath: LineItemComponent.CLM_LINE_SRVC_CST_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_SRVC_CST_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_LINE_SRVC_CST_AMT').amount.value
- inputPath: LineItemComponent.CLM_LINE_SLS_TAX_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_SLS_TAX_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_LINE_SLS_TAX_AMT').amount.value
- inputPath: LineItemComponent.CLM_LINE_VCCN_ADMIN_FEE_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_VCCN_ADMIN_FEE_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_LINE_VCCN_ADMIN_FEE_AMT').amount.value
- inputPath: LineItemComponent.CLM_LINE_GRS_CVRD_CST_TOT_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_GRS_CVRD_CST_TOT_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_LINE_GRS_CVRD_CST_TOT_AMT').amount.value
- inputPath: LineItemComponent.CLM_LINE_RPTD_GAP_DSCNT_AMT
  appliesTo:
    - Pharmacy
  sources:
    - DDPS
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_RPTD_GAP_DSCNT_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_LINE_RPTD_GAP_DSCNT_AMT').amount.value
- inputPath: LineItemComponent.TOT_RX_CST_AMT
  appliesTo:
    - Pharmacy
  sources:
    - DDPS
  bfdDerived: True
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='TOT_RX_CST_AMT').amount.value
  notes: Derived using the sum of CLM_LINE_INGRDNT_CST_AMT, CLM_LINE_SRVC_CST_AMT, CLM_LINE_SLS_TAX_AMT, and CLM_LINE_VCCN_ADMIN_FEE_AMT
- inputPath: LineItemComponent.CLM_PRCNG_EXCPTN_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - PRCNG_EXCPTN_CD
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_PRCNG_EXCPTN_CD
  fhirPath: ExplanationOfBenefit.adjudication.where(category.coding.where(system='http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBAdjudicationDiscriminator' and code='benefitpaymentstatus').exists()).reason.coding.where(system='http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBPayerAdjudicationStatus').code
- inputPath: SupportingInfoComponent.CLM_LINE_AUTHRZD_FILL_NUM
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - FILL_NUM
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_AUTHRZD_FILL_NUM
  fhirPath: ExplanationOfBenefit.supportingInfo.where(category.coding.system='http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBSupportingInfoType' and category.coding.code='refillsauthorized').valueQuantity.value
- inputPath: SupportingInfoComponent.CLM_PHRMCY_SRVC_TYPE_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - PHRMCY_SRVC_TYPE_CD
  cclfMapping:
    - CCLF7.CLM_PHRMCY_SRVC_TYPE_CD
  referenceTable: CLM_PHRMCY_SRVC_TYPE_CD
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_PHRMCY_SRVC_TYPE_CD
  fhirPath: ExplanationOfBenefit.supportingInfo.where(category.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/Supporting-Information' and code='CLM_PHRMCY_SRVC_TYPE_CD').exists()).code.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/CLM-PHRMCY-SRVC-TYPE-CD').code
- inputPath: SupportingInfoComponent.CLM_LINE_RX_ORGN_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - RX_ORGN_CD
  referenceTable: CLM_LINE_RX_ORGN_CD
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_RX_ORGN_CD
  fhirPath: ExplanationOfBenefit.supportingInfo.where(category.coding.where(system='http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBSupportingInfoType' and code='rxorigincode').exists()).code.coding.where(system='http://terminology.hl7.org/CodeSystem/NCPDPPrescriptionOriginCode').code
- inputPath: SupportingInfoComponent.CLM_BRND_GNRC_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  referenceTable: CLM_BRND_GNRC_CD
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_BRND_GNRC_CD
  ccwMapping:
    - BRND_GNRC_CD
  fhirPath: ExplanationOfBenefit.supportingInfo.where(category.coding.where(system='http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBSupportingInfoType' and code='brandgenericindicator').exists()).code.coding.where(system='http://terminology.hl7.org/CodeSystem/NCPDPBrandGenericIndicator').code
- inputPath: SupportingInfoComponent.CLM_PTNT_RSDNC_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - PTNT_RSDNC_CD
  referenceTable: CLM_PTNT_RSDNC_CD
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_PTNT_RSDNC_CD
  fhirPath: ExplanationOfBenefit.supportingInfo.code.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/CLM-PTNT-RSDNC-CD').code
- inputPath: SupportingInfoComponent.CLM_LTC_DSPNSNG_MTHD_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - SUBMSN_CLR_CD
  referenceTable: CLM_LTC_DSPNSNG_MTHD_CD
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LTC_DSPNSNG_MTHD_CD
  fhirPath: ExplanationOfBenefit.supportingInfo.code.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/CLM-LTC-DSPNSNG-MTHD-CD').code 
- inputPath: SupportingInfoComponent.CLM_CMPND_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - CMPND_CD
  referenceTable: CLM_CMPND_CD
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_CMPND_CD
  fhirPath: ExplanationOfBenefit.supportingInfo.where(category.coding.where(system='http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBSupportingInfoType' and code='compoundcode').exists()).code.coding.where(system='http://terminology.hl7.org/CodeSystem/NCPDPCompoundCode').code
- inputPath: SupportingInfoComponent.CLM_LINE_DAYS_SUPLY_QTY
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - DAYS_SUPLY_NUM
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_DAYS_SUPLY_QTY
  fhirPath: ExplanationOfBenefit.supportingInfo.where(category.coding.where(system='http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBSupportingInfoType' and code='dayssupply').exists()).valueQuantity.value
- inputPath: SupportingInfoComponent.CLM_LINE_RX_FILL_NUM
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - FILL_NUM
  cclfMapping:
    - CCLF7.CLM_LINE_RX_FILL_NUM
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_RX_FILL_NUM
  fhirPath: ExplanationOfBenefit.supportingInfo.where(category.coding.where(system='http://hl7.org/fhir/us/carin-bb/CodeSystem/C4BBSupportingInfoType' and code='refillnum').exists()).valueQuantity.value
- inputPath: SupportingInfoComponent.CLM_DAW_PROD_SLCTN_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - DAW_PROD_SLCTN_CD
  cclfMapping:
    - CCLF7.CLM_DAW_PROD_SLCTN_CD
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_DAW_PROD_SLCTN_CD
  fhirPath: ExplanationOfBenefit.supportingInfo.code.coding.where(system='http://terminology.hl7.org/CodeSystem/NCPDPDispensedAsWrittenOrProductSelectionCode').code 
- inputPath: SupportingInfoComponent.CLM_DRUG_CVRG_STUS_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - DRUG_CVRG_STUS_CD
  referenceTable: CLM_DRUG_CVRG_STUS_CD
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_DRUG_CVRG_STUS_CD
  fhirPath: ExplanationOfBenefit.supportingInfo.code.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/CLM-DRUG-CVRG-STUS-CD').code 
- inputPath: SupportingInfoComponent.CLM_CTSTRPHC_CVRG_IND_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - CTSTRPHC_CVRG_CD
  referenceTable: CLM_CTSTRPHC_CVRG_IND_CD
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_CTSTRPHC_CVRG_IND_CD
  fhirPath: ExplanationOfBenefit.supportingInfo.code.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/CLM-CTSTRPHC-CVRG-IND-CD').code 
- inputPath: SupportingInfoComponent.CLM_ADJSTMT_TYPE_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - ADJSTMT_DLTN_CD
  cclfMapping:
    - CCLF7.CLM_ADJSMT_TYPE_CD
  referenceTable: CLM_ADJSTMT_TYPE_CD
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_ADJSTMT_TYPE_CD
  fhirPath: ExplanationOfBenefit.supportingInfo.where(category.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/Supporting-Information').exists() and category.coding.where(code='CLM_ADJSTMT_TYPE_CD').exists()).code.coding.code
- inputPath: SupportingInfoComponent.CLM_DSPNSNG_STUS_CD
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - DSPNSNG_STUS_CD
  cclfMapping:
    - CCLF7.CLM_DSPNSNG_STUS_CD
  referenceTable: CLM_DSPNSNG_STUS_CD
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_DSPNSNG_STUS_CD
  fhirPath: ExplanationOfBenefit.supportingInfo.code.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/CLM-DSPNSNG-STUS-CD').code 
- inputPath: SupportingInfoComponent.CLM_IDR_LD_DT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  cclfMapping:
    - CCLF7.CLM_IDR_LD_DT
  sourceView: V2_MDCR_CLM
  sourceColumn: CLM_IDR_LD_DT
  fhirPath: ExplanationOfBenefit.supportingInfo.where(category.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/Supporting-Information').exists() and category.coding.where(code='CLM_IDR_LD_DT').exists()).code.coding.code
- inputPath: SupportingInfoComponent.CLM_LINE_RX_NUM
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  ccwMapping:
    - RX_SRVC_RFRNC_NUM
  cclfMapping:
    - CCLF7.CLM_LINE_RX_SRVC_RFRNC_NUM
  sourceView: V2_MDCR_CLM_LINE
  sourceColumn: CLM_LINE_RX_NUM
  fhirPath: ExplanationOfBenefit.supportingInfo.where(category.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/Supporting-Information' and code='CLM_LINE_RX_NUM').exists()).value
- inputPath: LineItemComponent.CLM_LINE_NCVRD_PD_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM_LINE
  sourceColumn: CLM_LINE_NCVRD_PD_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication') and category.coding.where(code='CLM_LINE_NCVRD_PD_AMT')).amount.value
- inputPath: LineItemComponent.CLM_LINE_OTHR_TP_PD_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM_LINE
  sourceColumn: CLM_LINE_OTHR_TP_PD_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.where(system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication') and category.coding.where(code='CLM_LINE_OTHR_TP_PD_AMT')).amount.value
- inputPath: LineItemComponent.CLM_CMS_CALCD_MFTR_DSCNT_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_CMS_CALCD_MFTR_DSCNT_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_CMS_CALCD_MFTR_DSCNT_AMT').amount.value
- inputPath: LineItemComponent.CLM_LINE_REBT_PASSTHRU_POS_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_LINE_REBT_PASSTHRU_POS_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_LINE_REBT_PASSTHRU_POS_AMT').amount.value
- inputPath: LineItemComponent.CLM_PHRMCY_PRICE_DSCNT_AT_POS_AMT
  appliesTo:
    - Pharmacy
  sources:
    - NCH
  sourceView: V2_MDCR_CLM_LINE_RX
  sourceColumn: CLM_PHRMCY_PRICE_DSCNT_AT_POS_AMT
  fhirPath: ExplanationOfBenefit.item.adjudication.where(category.coding.system='https://bluebutton.cms.gov/fhir/CodeSystem/Adjudication' and category.coding.code='CLM_PHRMCY_PRICE_DSCNT_AT_POS_AMT').amount.value
